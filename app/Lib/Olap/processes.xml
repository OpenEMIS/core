<processes>

    <!-- Areas subsets -->
	<process name="area_levels" type="lookup">
		<create type="destination" table="area_levels">
			<SQL dialect="mysql">
			<![CDATA[
				CREATE TABLE `area_levels` (
				  `id` int(11) NOT NULL AUTO_INCREMENT,
				  `name` varchar(100) NOT NULL,
				  `level` int(3) NOT NULL,
				  `modified_user_id` int(11) DEFAULT NULL,
				  `modified` datetime DEFAULT NULL,
				  `created_user_id` int(11) NOT NULL,
				  `created` datetime NOT NULL,
				  PRIMARY KEY (`id`)
				) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;
			]]>
			</SQL>
		</create>
		<drop type="destination" table="area_levels">
			<SQL dialect="mysql">
			<![CDATA[
				DROP TABLE `area_levels`;
			]]>
			</SQL>
		</drop>
		<truncate type="destination" table="area_levels">
			<SQL dialect="mysql">
			<![CDATA[
				TRUNCATE TABLE `area_levels`;
			]]>
			</SQL>
		</truncate>
		<insert type="destination" table="area_levels">
			<SQL dialect="mysql">
			<![CDATA[
				INSERT INTO `area_levels` (
					`id`, `name`, `level`, `modified_user_id`, `modified`, `created_user_id`, `created`
				) VALUES (
					:id, :name, :level, :modified_user_id, :modified, :created_user_id, :created
				)	
			]]>
			</SQL>
		</insert>
		<select type="source" table="area_levels">
			<SQL dialect="mysql">
			<![CDATA[
				SELECT `id`, `name`, `level`, `modified_user_id`, `modified`, `created_user_id`, `created` FROM `area_levels`
			]]>
			</SQL>
		</select>
	</process>
	<process name="areas" type="lookup">
		<create type="destination" table="areas">
			<SQL dialect="mysql">
			<![CDATA[
				CREATE TABLE `areas` (
				  `id` int(11) NOT NULL AUTO_INCREMENT,
				  `code` varchar(60) NOT NULL,
				  `name` varchar(100) NOT NULL,
				  `parent_id` int(11) NOT NULL,
				  `area_level_id` int(11) NOT NULL,
				  `order` int(3) NOT NULL,
				  `visible` int(1) NOT NULL DEFAULT '1',
				  `modified_user_id` int(11) DEFAULT NULL,
				  `modified` datetime DEFAULT NULL,
				  `created_user_id` int(11) NOT NULL,
				  `created` datetime NOT NULL,
				  PRIMARY KEY (`id`),
				  KEY `area_level_id` (`area_level_id`),
				  KEY `parent_id` (`parent_id`)
				) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;
			]]>
			</SQL>
		</create>
		<drop type="destination" table="areas">
			<SQL dialect="mysql">
			<![CDATA[
				DROP TABLE `areas`;
			]]>
			</SQL>
		</drop>
		<truncate type="destination" table="areas">
			<SQL dialect="mysql">
			<![CDATA[
				TRUNCATE TABLE `areas`;
			]]>
			</SQL>
		</truncate>
		<insert type="destination" table="areas">
			<SQL dialect="mysql">
			<![CDATA[
				INSERT INTO `areas` (
					`id`, `code`, `name`, `parent_id`, `area_level_id`, `order`, `visible`, `modified_user_id`, `modified`, `created_user_id`, `created`
				) VALUES (
					:id, :code, :name, :parent_id, :area_level_id, :order, :visible, :modified_user_id, :modified, :created_user_id, :created
				)	
			]]>
			</SQL>
		</insert>
		<select type="source" table="areas">
			<SQL dialect="mysql">
			<![CDATA[
				SELECT `id`, `code`, `name`, `parent_id`, `area_level_id`, `order`, `visible`, `modified_user_id`, `modified`, `created_user_id`, `created` FROM `areas`
			]]>
			</SQL>
		</select>
	</process>

    <!-- Education subsets -->
    <process name="education_certifications" type="lookup">
        <create type="destination" table="education_certifications">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_certifications` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_certifications">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_certifications`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_certifications">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_certifications`;
                ]]>
            </SQL>
        </truncate>
        <insert>
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_certifications` (
                        `id`, `name`, `order`, `visible`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :modified_user_id, :modified, :created_user_id, :created
                    )
                ]]>
            </SQL>
        </insert>
        <select type="source" table="education_certifications">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_certifications`
                ]]>
            </SQL>
        </select>
    </process>
    <process name="education_cycles" type="lookup">
        <create type="destination" table="education_cycles">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_cycles` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `admission_age` int(3) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `education_level_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_cycles">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_cycles`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_cycles">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_cycles`;
                ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_cycles">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_cycles` (
                        `id`, `name`, `admission_age`, `order`, `visible`, `education_level_id`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :admission_age, :order, :visible, :education_level_id, :modified_user_id, :modified, :created_user_id, :created
                    );
                ]]>
            </SQL>
        </insert>
        <select type="source" table="education_cycles">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_cycles` ORDER BY `id`
                ]]>
            </SQL>
        </select>
    </process>
    <process name="education_field_of_studies" type="lookup">
        <create type="destination" table="education_field_of_studies">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_field_of_studies` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `education_programme_orientation_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB AUTO_INCREMENT=0 DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_field_of_studies">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_field_of_studies`
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_field_of_studies">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_field_of_studies`
                ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_field_of_studies">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_field_of_studies` (
                        `id`, `name`, `order`, `visible`, `education_programme_orientation_id`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :education_programme_orientation_id, :modified_user_id, :modified, :created_user_id, :created
                    )
                ]]>
            </SQL>
        </insert>
        <select type="source" table="education_field_of_studies">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_field_of_studies`
                ]]>
            </SQL>
        </select>
    </process>
    <process name="education_grades" type="lookup">
        <create type="destination" table="education_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_grades` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `code` varchar(50) NOT NULL,
                      `name` varchar(150) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `education_programme_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `education_programme_id` (`education_programme_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
               ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_grades`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_grades`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_grades` (
                        `id`, `code`, `name`, `order`, `visible`, `education_programme_id`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :code, :name, :order, :visible, :education_programme_id, :modified_user_id, :modified, :created_user_id, :created
                    );
                ]]>
            </SQL>
        </insert>
        <select type="source" table="education_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_grades`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="education_grades_subjects" type="lookup">
        <create type="destination" table="education_grades_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_grades_subjects` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `hours_required` int(5) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `education_grade_id` int(11) NOT NULL,
                      `education_subject_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_grades_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_grades_subjects`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_grades_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_grades_subjects`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_grades_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_grades_subjects` (
                        `id`, `hours_required`, `order`, `visible`, `education_grade_id`, `education_subject_id`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :hours_required, :order, :visible, :education_grade_id, :education_subject_id, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="education_grades_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_grades_subjects`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="education_level_isced" type="lookup">
        <create type="destination" table="education_level_isced">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_level_isced` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `description` text NOT NULL,
                      `isced_level` int(2) NOT NULL,
                      `isced_version` varchar(50) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_level_isced">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_level_isced`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_level_isced">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_level_isced`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_level_isced">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_level_isced` (
                        `id`, `name`, `description`, `isced_level`, `isced_version`, `order`, `visible`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :description, :isced_level, :isced_version, :order, :visible, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="education_level_isced">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_level_isced`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="education_levels" type="lookup">
        <create type="destination" table="education_levels">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_levels` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `education_system_id` int(11) NOT NULL,
                      `education_level_isced_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_levels">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_levels`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_levels">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_levels`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_levels">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_levels` (
                        `id`, `name`, `order`, `visible`, `education_system_id`, `education_level_isced_id`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :education_system_id, :education_level_isced_id, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="education_levels">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_levels`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="education_programme_orientations" type="lookup">
        <create type="destination" table="education_programme_orientations">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_programme_orientations` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_programme_orientations">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_programme_orientations`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_programme_orientations">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_programme_orientations`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_programme_orientations">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_programme_orientations` (
                        `id`, `name`, `order`, `visible`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    )VALUES (
                        :id, :name, :order, :visible, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="education_programme_orientations">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_programme_orientations`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="education_programmes" type="lookup">
        <create type="destination" table="education_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_programmes` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `code` varchar(50) NOT NULL,
                      `name` varchar(150) NOT NULL,
                      `duration` int(3) NOT NULL COMMENT 'No of years',
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `education_field_of_study_id` int(11) NOT NULL,
                      `education_cycle_id` int(11) NOT NULL,
                      `education_certification_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_programmes`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_programmes`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_programmes` (
                        `id`, `code`, `name`, `duration`, `order`, `visible`, `education_field_of_study_id`, `education_cycle_id`, `education_certification_id`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :code, :name, :duration, :order, :visible, :education_field_of_study_id, :education_cycle_id, :education_certification_id, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="education_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_programmes`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="education_subjects" type="lookup">
        <create type="destination" table="education_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_subjects` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `code` varchar(20) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_subjects`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_subjects`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_subjects` (
                        `id`, `name`, `code`, `order`, `visible`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :code, :order, :visible, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="education_subjects">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_subjects`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="education_systems" type="lookup">
        <create type="destination" table="education_systems">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `education_systems` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="education_systems">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `education_systems`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="education_systems">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `education_systems`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="education_systems">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `education_systems` (
                        `id`, `name`, `order`, `visible`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="education_systems">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `education_systems`;
                        ]]>
            </SQL>
        </select>
    </process>

    <!-- Institution subsets -->
    <process name="institution_providers" type="lookup">
        <create type="destination" table="institution_providers">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_providers` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_providers">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_providers`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_providers">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_providers`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_providers">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_providers` (
                        `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :international_code, :national_code, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_providers">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_providers`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_sectors" type="lookup">
        <create type="destination" table="institution_sectors">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_sectors` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_sectors">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_sectors`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_sectors">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_sectors`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_sectors">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_sectors` (
                        `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :international_code, :national_code, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_sectors">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_sectors`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_statuses" type="lookup">
        <create type="destination" table="institution_statuses">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_statuses` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_statuses">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_statuses`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_statuses">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_statuses`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_statuses">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_statuses` (
                        `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :international_code, :national_code, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_statuses">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_statuses`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institutions" type="lookup">
        <create type="destination" table="institutions">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institutions` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `code` varchar(50) NOT NULL,
                      `address` text NOT NULL,
                      `postal_code` varchar(20) NOT NULL,
                      `contact_person` varchar(100) DEFAULT NULL,
                      `telephone` varchar(30) DEFAULT NULL,
                      `fax` varchar(30) DEFAULT NULL,
                      `email` varchar(100) DEFAULT NULL,
                      `website` varchar(100) DEFAULT NULL,
                      `date_opened` date NOT NULL,
                      `year_opened` int(4) NOT NULL,
                      `date_closed` date DEFAULT NULL,
                      `year_closed` int(4) DEFAULT NULL,
                      `area_id` int(11) NOT NULL,
                      `institution_sector_id` int(11) NOT NULL,
                      `institution_provider_id` int(11) NOT NULL DEFAULT '0',
                      `institution_status_id` int(11) NOT NULL DEFAULT '0',
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institutions">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institutions`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institutions">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institutions`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institutions">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institutions` (
                        `id`, `name`, `code`, `address`, `postal_code`, `contact_person`, `telephone`, `fax`, `email`,
                        `website`, `date_opened`, `year_opened`, `date_closed`, `year_closed`, `area_id`, `institution_sector_id`,
                        `institution_provider_id`, `institution_status_id`, `modified_user_id`, `modified`,
                        `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :code, :address, :postal_code, :contact_person, :telephone, :fax, :email,
                        :website, :date_opened, :year_opened, :date_closed, :year_closed, :area_id, :institution_sector_id,
                        :institution_provider_id, :institution_status_id, :modified_user_id, :modified,
                        :created_user_id, :created

	);
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institutions">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institutions`;
                        ]]>
            </SQL>
        </select>
    </process>

    <!-- Institution Site subsets -->
    <process name="institution_site_bank_accounts" type="lookup">
        <create type="destination" table="institution_site_bank_accounts">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_bank_accounts` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `account_name` varchar(100) NOT NULL,
                      `account_number` varchar(100) NOT NULL,
                      `active` int(1) NOT NULL DEFAULT '0' COMMENT '1 is active, 0 is inactive',
                      `institution_site_id` int(11) NOT NULL,
                      `bank_branch_id` int(11) NOT NULL,
                      `remarks` text,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_bank_accounts">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_bank_accounts`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_bank_accounts">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_bank_accounts`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_bank_accounts">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_bank_accounts` (
                        `id`, `account_name`, `account_number`, `active`, `institution_site_id`, `bank_branch_id`, `remarks`,
                        `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :account_name, :account_number, :active, :institution_site_id, :bank_branch_id, :remarks,
                        :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_bank_accounts">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_bank_accounts`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_class_grade_students" type="lookup">
        <create type="destination" table="institution_site_class_grade_students">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_class_grade_students` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `student_id` int(11) NOT NULL,
                      `student_category_id` int(11) NOT NULL,
                      `institution_site_class_grade_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `student_id` (`student_id`),
                      KEY `institution_site_class_grade_id` (`institution_site_class_grade_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_class_grade_students">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_class_grade_students`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_class_grade_students">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_class_grade_students`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_class_grade_students">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_class_grade_students` (
                        `id`, `student_id`, `student_category_id`, `institution_site_class_grade_id`, `modified_user_id`, `modified`,
                        `created_user_id`, `created`
                    ) VALUES (
                        :id, :student_id, :student_category_id, :institution_site_class_grade_id, :modified_user_id, :modified,
                        :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_class_grade_students">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_class_grade_students`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_class_grades" type="lookup">
        <create type="destination" table="institution_site_class_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_class_grades` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `institution_site_class_id` int(11) NOT NULL,
                      `education_grade_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `institution_site_class_id` (`institution_site_class_id`),
                      KEY `education_grade_id` (`education_grade_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_class_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_class_grades`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_class_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_class_grades`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_class_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_class_grades` (
                        `id`, `institution_site_class_id`, `education_grade_id`, `modified_user_id`, `modified`,
                        `created_user_id`, `created`
                    ) VALUES (
                        :id, :institution_site_class_id, :education_grade_id, :modified_user_id, :modified,
                        :created_user_id, :created
                    );

                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_class_grades">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_class_grades`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_class_teachers" type="lookup">
        <create type="destination" table="institution_site_class_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_class_teachers` (
                      `teacher_id` int(11) NOT NULL,
                      `institution_site_class_id` int(11) NOT NULL,
                      `education_subject_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`teacher_id`,`institution_site_class_id`,`education_subject_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_class_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_class_teachers`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_class_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_class_teachers`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_class_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_class_teachers` (
                          `teacher_id`, `institution_site_class_id`, `education_subject_id`, `modified_user_id`,
                          `modified`, `created_user_id`, `created`
                    ) VALUES (
                          :teacher_id, :institution_site_class_id, :education_subject_id, :modified_user_id,
                          :modified, :created_user_id, :created
                    );

                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_class_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                   SELECT * FROM `institution_site_class_teachers`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_classes" type="lookup">
        <create type="destination" table="institution_site_classes">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_classes` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) DEFAULT NULL,
                      `no_of_seats` int(3) DEFAULT NULL,
                      `no_of_shifts` int(2) DEFAULT NULL,
                      `institution_site_id` int(11) NOT NULL,
                      `school_year_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `institution_site_id` (`institution_site_id`),
                      KEY `school_year_id` (`school_year_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_classes">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_classes`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_classes">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_classes`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_classes">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_classes` (
                        `id`, `name`, `no_of_seats`, `no_of_shifts`, `institution_site_id`, `school_year_id`, `modified_user_id`, `modified`,
                        `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :no_of_seats, :no_of_shifts, :institution_site_id, :school_year_id, :modified_user_id, :modified,
                        :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_classes">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_classes`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_localities" type="lookup">
        <create type="destination" table="institution_site_localities">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_localities` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_localities">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_localities`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_localities">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_localities`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_localities">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_localities` (
                        `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :international_code, :national_code, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_localities">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_localities`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_ownership" type="lookup">
        <create type="destination" table="institution_site_ownership">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_ownership` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` date DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` date NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_ownership">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_ownership`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_ownership">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_ownership`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_ownership">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_ownership` (
                        `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :international_code, :national_code, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_ownership">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_ownership`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_programmes" type="lookup">
        <create type="destination" table="institution_site_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_programmes` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `education_programme_id` int(11) NOT NULL,
                      `institution_site_id` int(11) NOT NULL,
                      `school_year_id` int(11) NOT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `institution_site_id` (`institution_site_id`),
                      KEY `education_programme_id` (`education_programme_id`),
                      KEY `school_year_id` (`school_year_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_programmes`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_programmes`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_programmes` (
                        `id`, `education_programme_id`, `institution_site_id`, `school_year_id`,
                        `created_user_id`, `created`
                    ) VALUES (
                        :id, :education_programme_id, :institution_site_id, :school_year_id,
                        :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_programmes">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_programmes`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_staff" type="lookup">
        <create type="destination" table="institution_site_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_staff` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `position_no` varchar(20) DEFAULT NULL,
                      `FTE` int(11) DEFAULT NULL,
                      `staff_id` int(11) NOT NULL,
                      `staff_status_id` int(3) NOT NULL,
                      `staff_category_id` int(11) NOT NULL,
                      `staff_position_title_id` int(11) NOT NULL,
                      `staff_position_grade_id` int(11) NOT NULL,
                      `staff_position_step_id` int(11) NOT NULL,
                      `institution_site_id` int(11) NOT NULL,
                      `start_date` date NOT NULL,
                      `start_year` int(4) NOT NULL,
                      `end_date` date DEFAULT NULL,
                      `end_year` int(4) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `staff_id` (`staff_id`),
                      KEY `staff_category_id` (`staff_category_id`),
                      KEY `institution_site_id` (`institution_site_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_staff`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_staff`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_staff` (
                        `id`, `position_no`, `FTE`, `staff_id`, `staff_status_id`, `staff_category_id`, `staff_position_title_id`, `staff_position_grade_id`, `staff_position_step_id`, `institution_site_id`, `start_date`, `start_year`,
                        `end_date`, `end_year`, `modified_user_id`,
                        `modified`, `created_user_id`, `created`
                    )VALUES (
                        :id, :position_no, :FTE, :staff_id, :staff_status_id, :staff_category_id, :staff_position_title_id, :staff_position_grade_id, :staff_position_step_id, :institution_site_id, :start_date, :start_year,
                        :end_date, :end_year, :modified_user_id,
                        :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_staff`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_statuses" type="lookup">
        <create type="destination" table="institution_site_statuses">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_statuses` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <truncate type="destination" table="institution_site_statuses">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_statuses`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_statuses">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_statuses` (
                        `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :international_code, :national_code, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_statuses">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_statuses`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_students" type="lookup">
        <create type="destination" table="institution_site_students">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_students` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `start_date` date NOT NULL,
                      `start_year` int(4) NOT NULL,
                      `end_date` date DEFAULT NULL,
                      `end_year` int(4) DEFAULT NULL,
                      `student_id` int(11) NOT NULL,
                      `student_status_id` int(3) NOT NULL,
                      `institution_site_programme_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `student_id` (`student_id`),
                      KEY `institution_site_programme_id` (`institution_site_programme_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_students">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_students`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_students">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_students`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_students">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_students` (
                        `id`, `start_date`, `start_year`, `end_date`, `end_year`, `student_id`, `student_status_id`, 
                        `institution_site_programme_id`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :start_date, :start_year, :end_date, :end_year, :student_id, :student_status_id, 
                        :institution_site_programme_id, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_students">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_site_students`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_teachers" type="lookup">
        <create type="destination" table="institution_site_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_teachers` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `position_no` varchar(20) DEFAULT NULL,
                      `FTE` float(4,2) DEFAULT NULL,
                      `teacher_id` int(11) NOT NULL,
                      `teacher_status_id` int(3) NOT NULL,
                      `teacher_category_id` int(11) NOT NULL,
                      `teacher_position_title_id` int(11) NOT NULL,
                      `teacher_position_grade_id` int(11) NOT NULL,
                      `teacher_position_step_id` int(11) NOT NULL,
                      `institution_site_id` int(11) NOT NULL,
                      `start_date` date NOT NULL,
                      `start_year` int(4) NOT NULL,
                      `end_date` date DEFAULT NULL,
                      `end_year` int(4) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `teacher_id` (`teacher_id`),
                      KEY `teacher_category_id` (`teacher_category_id`),
                      KEY `institution_site_id` (`institution_site_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_teachers`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_teachers`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_teachers` (
                        `id`, `position_no`, `FTE`, `teacher_id`, `teacher_status_id`, `teacher_category_id`, `teacher_position_title_id`, `teacher_position_grade_id`, `teacher_position_step_id`, `institution_site_id`, `start_date`, `start_year`,
                        `end_date`, `end_year`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :position_no, :FTE, :teacher_id, :teacher_status_id, :teacher_category_id, :teacher_position_title_id, :teacher_position_grade_id, :teacher_position_step_id, :institution_site_id, :start_date, :start_year,
                        :end_date, :end_year, :modified_user_id, :modified, :created_user_id, :created
                    );

                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM  `institution_site_teachers`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_site_types" type="lookup">
        <create type="destination" table="institution_site_types">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `institution_site_types` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_site_types">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_site_types`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_site_types">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_site_types`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_site_types">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_site_types` (
                        `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    )VALUES (
                        :id, :name, :order, :visible, :international_code, :national_code, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_site_types">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM  `institution_site_types`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="institution_sites" type="lookup">
        <create type="destination" table="institution_sites">
            <SQL dialect="mysql">
                <![CDATA[

                    CREATE TABLE `institution_sites` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `code` varchar(50) NOT NULL,
                      `address` text NOT NULL,
                      `postal_code` varchar(20) NOT NULL,
                      `contact_person` varchar(100) DEFAULT NULL,
                      `telephone` varchar(30) DEFAULT NULL,
                      `fax` varchar(30) DEFAULT NULL,
                      `email` varchar(100) DEFAULT NULL,
                      `website` varchar(100) DEFAULT NULL,
                      `date_opened` date NOT NULL,
                      `year_opened` int(4) NOT NULL,
                      `date_closed` date DEFAULT NULL,
                      `year_closed` int(4) DEFAULT NULL,
                      `longitude` varchar(15) DEFAULT NULL,
                      `latitude` varchar(15) DEFAULT NULL,
                      `area_id` int(11) NOT NULL,
                      `area_education_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) NOT NULL,
                      `institution_site_locality_id` int(11) NOT NULL,
                      `institution_site_type_id` int(11) NOT NULL,
                      `institution_site_ownership_id` int(11) NOT NULL,
                      `institution_site_status_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `area_id` (`area_id`),
                      KEY `institution_id` (`institution_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="institution_sites">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `institution_sites`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="institution_sites">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `institution_sites`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="institution_sites">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `institution_sites` (
                        `id`, `name`, `code`, `address`, `postal_code`, `contact_person`, `telephone`, `fax`, `email`,
                        `website`, `date_opened`, `year_opened`, `date_closed`, `year_closed`, `longitude`, `latitude`, `area_id`, `area_education_id`,`institution_id`, `institution_site_locality_id`, `institution_site_type_id`, `institution_site_ownership_id`,
                        `institution_site_status_id`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    )VALUES (
                        :id, :name, :code, :address, :postal_code, :contact_person, :telephone, :fax, :email,
                        :website, :date_opened, :year_opened, :date_closed, :year_closed, :longitude, :latitude, :area_id, :area_education_id, :institution_id,
                        :institution_site_locality_id, :institution_site_type_id, :institution_site_ownership_id,
                        :institution_site_status_id, :modified_user_id, :modified, :created_user_id, :created
                    );

                        ]]>
            </SQL>
        </insert>
        <select type="source" table="institution_sites">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `institution_sites`;
                        ]]>
            </SQL>
        </select>
    </process>

    <!-- School Year -->
    <process name="school_years" type="lookup">
        <create type="destination" table="school_years">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `school_years` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(50) NOT NULL,
                      `start_date` date NOT NULL,
                      `start_year` int(4) NOT NULL,
                      `end_date` date DEFAULT NULL,
                      `end_year` int(4) DEFAULT NULL,
                      `school_days` int(5) NOT NULL DEFAULT '0',
                      `current` char(1) NOT NULL,
                      `available` char(1) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="school_years">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `school_years`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="school_years">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `school_years`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="school_years">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `school_years` (
                        `id`, `name`, `start_date`, `start_year`, `end_date`, `end_year`, `school_days`, `current`, `available`,
                        `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :start_date, :start_year, :end_date, :end_year, :school_days, :current, :available,
                        :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="school_years">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `school_years`;
                        ]]>
            </SQL>
        </select>
    </process>

    <!-- Staff subsets -->
    <process name="staff" type="lookup">
        <create type="destination" table="staff">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `staff` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `identification_no` varchar(100) DEFAULT NULL,
                      `first_name` varchar(100) NOT NULL,
                      `middle_name` varchar(100) DEFAULT NULL,
                      `last_name` varchar(100) NOT NULL,
                      `preferred_name` varchar(100) DEFAULT NULL,
                      `gender` char(1) NOT NULL COMMENT 'M for Male, F for Female',
                      `date_of_birth` date NOT NULL,
                      `date_of_death` date DEFAULT NULL,
                      `address` text,
                      `address_area_id` int(11) DEFAULT '0',
                      `birthplace_area_id` int(11) DEFAULT '0',
                      `postal_code` varchar(20) DEFAULT NULL,
                      `telephone` varchar(30) DEFAULT NULL,
                      `email` varchar(100) DEFAULT NULL,
                      `photo_name` varchar(250) DEFAULT '',
                      `photo_content` longblob,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `birthplace_area_id` (`birthplace_area_id`),
                      KEY `address_area_id` (`address_area_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="staff">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `staff`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="staff">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `staff`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="staff">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `staff` (
                        `id`, `identification_no`, `first_name`, `middle_name`, `last_name`, `preferred_name`, `gender`, `date_of_birth`, `date_of_death`, `address`,
                        `address_area_id`, `birthplace_area_id`, `postal_code`, `telephone`, `email`, `photo_name`,
                        `photo_content`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :identification_no, :first_name, :middle_name, :last_name, :preferred_name, :gender, :date_of_birth, :date_of_death, :address,
                        :address_area_id, :birthplace_area_id, :postal_code, :telephone, :email, :photo_name,
                        :photo_content, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="staff">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `staff`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="staff_categories" type="lookup">
        <create type="destination" table="staff_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `staff_categories` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="staff_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `staff_categories`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="staff_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `staff_categories`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="staff_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `staff_categories` (
                      `id`,`name`,`order`,`visible`, `international_code`, `national_code`, `modified_user_id`,`modified`,`created_user_id`,`created`
                    ) VALUES (
                        :id,:name,:order,:visible,:international_code,:national_code,:modified_user_id,:modified,:created_user_id,:created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="staff_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `staff_categories`;
                        ]]>
            </SQL>
        </select>
    </process>

    <!-- Student subsets -->
    <process name="student_categories" type="lookup">
        <create type="destination" table="student_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `student_categories` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(50) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="student_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `student_categories`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="student_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `student_categories`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="student_categories">
            <SQL dialect="mysql">
                <![CDATA[
                     INSERT INTO `student_categories` (
                      `id`,`name`,`order`,`visible`, `international_code`, `national_code`, `modified_user_id`,`modified`,`created_user_id`,`created`
                    ) VALUES (
                        :id,:name,:order,:visible,:international_code,:national_code,:modified_user_id,:modified,:created_user_id,:created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="student_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `student_categories`
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="students" type="lookup">
        <create type="destination" table="students">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `students` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `identification_no` varchar(100) NOT NULL,
                      `first_name` varchar(100) NOT NULL,
                      `middle_name` varchar(100) DEFAULT NULL,
                      `last_name` varchar(100) NOT NULL,
                      `preferred_name` varchar(100) DEFAULT NULL,
                      `gender` char(1) NOT NULL COMMENT 'M for Male, F for Female',
                      `date_of_birth` date NOT NULL,
                      `date_of_death` date DEFAULT NULL,
                      `address` text,
                      `address_area_id` int(11) DEFAULT '0',
                      `birthplace_area_id` int(11) DEFAULT '0',
                      `postal_code` varchar(20) DEFAULT NULL,
                      `telephone` varchar(30) DEFAULT NULL,
                      `email` varchar(100) DEFAULT NULL,
                      `photo_name` varchar(250) DEFAULT '',
                      `photo_content` longblob,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `birthplace_area_id` (`birthplace_area_id`),
                      KEY `address_area_id` (`address_area_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="students">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `students`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="students">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `students`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="students">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `students` (
                        `id`, `identification_no`, `first_name`, `middle_name`, `last_name`, `preferred_name`, `gender`, `date_of_birth`, `date_of_death`, `address`,
                        `address_area_id`, `birthplace_area_id`, `postal_code`, `telephone`, `email`, `photo_name`,
                        `photo_content`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :identification_no, :first_name, :middle_name, :last_name, :preferred_name, :gender, :date_of_birth, :date_of_death, :address,
                        :address_area_id, :birthplace_area_id, :postal_code, :telephone, :email, :photo_name,
                        :photo_content, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="students">
            <SQL dialect="mysql">
                <![CDATA[
                        SELECT * FROM `students`;
                        ]]>
            </SQL>
        </select>
    </process>

    <!-- Teacher subset -->
    <process name="teacher_categories" type="lookup">
        <create type="destination" table="teacher_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `teacher_categories` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="teacher_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `teacher_categories`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="teacher_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `teacher_categories`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="teacher_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `teacher_categories` (
                        `id`,`name`,`order`,`visible`, `international_code`, `national_code`, `modified_user_id`,`modified`,`created_user_id`,`created`
                    ) VALUES (
                        :id,:name,:order,:visible,:international_code,:national_code,:modified_user_id,:modified,:created_user_id,:created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="teacher_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `teacher_categories`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="teacher_qualification_certificates" type="lookup">
        <create type="destination" table="teacher_qualification_certificates">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `teacher_qualification_certificates` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `teacher_qualification_category_id` int(11) NOT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="teacher_qualification_certificates">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `teacher_qualification_certificates`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="teacher_qualification_certificates">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `teacher_qualification_certificates`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="teacher_qualification_certificates">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `teacher_qualification_certificates` (
                        `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `teacher_qualification_category_id`, `modified_user_id`,
                        `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :name, :order, :visible, :international_code, :national_code, :teacher_qualification_category_id, :modified_user_id,
                        :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="teacher_qualification_certificates">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `teacher_qualification_certificates`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="teacher_qualifications" type="lookup">
        <create type="destination" table="teacher_qualifications">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `teacher_qualifications` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `document_no` varchar(100) DEFAULT NULL,
                      `graduate_year` int(4) NOT NULL,
                      `teacher_id` int(11) NOT NULL,
                      `qualification_level_id` int(11) NOT NULL,
                      `qualification_title` varchar(100) NOT NULL,
                      `qualification_specialisation_id` int(11) NOT NULL,
                      `qualification_institution_id` int(11) NOT NULL,
                      `qualification_institution_country` varchar(255) DEFAULT NULL,
                      `file_name` varchar(250) DEFAULT NULL,
                      `file_content` longblob,
                      `gpa` varchar(5) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="teacher_qualifications">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `teacher_qualifications`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="teacher_qualifications">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `teacher_qualifications`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="teacher_qualifications">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `teacher_qualifications` (
                        `id`, `document_no`, `graduate_year`, `teacher_id`, `qualification_level_id`, `qualification_title`, `qualification_specialisation_id`, `qualification_institution_id`, `qualification_institution_country`, `file_name`, `file_content`, `gpa`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :document_no, :graduate_year, :teacher_id, :qualification_level_id, :qualification_title, :qualification_specialisation_id,
                        :qualification_institution_id, :qualification_institution_country, :file_name, :file_content, :gpa, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="teacher_qualifications">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `teacher_qualifications`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="teacher_training" type="lookup">
        <create type="destination" table="teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `teacher_training` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `teacher_id` int(11) NOT NULL,
                      `teacher_training_category_id` int(11) NOT NULL,
                      `completed_date` date DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                        ]]>
            </SQL>
        </create>
        <drop type="destination" table="teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `teacher_training`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `teacher_training`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `teacher_training`(
                        `id`, `teacher_id`, `teacher_training_category_id`, `completed_date`, `modified_user_id`,
                        `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :teacher_id, :teacher_training_category_id, :completed_date, :modified_user_id,
                        :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `teacher_training`;
                        ]]>
            </SQL>
        </select>
    </process>
    <process name="teacher_training_categories" type="lookup">
        <create type="destination" table="teacher_training_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `teacher_training_categories` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(100) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <drop type="destination" table="teacher_training_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `teacher_training_categories`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="teacher_training_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `teacher_training_categories`;
                ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="teacher_training_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `teacher_training_categories`(
                        `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES(
                        :id, :name, :order, :visible, :international_code, :national_code, :modified_user_id, :modified, :created_user_id, :created
                    );
                ]]>
            </SQL>
        </insert>
        <select type="source" table="teacher_training_categories">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `teacher_training_categories`;
                ]]>
            </SQL>
        </select>
    </process>
    <process name="teachers" type="lookup">
        <create type="destination" table="teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `teachers` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `identification_no` varchar(100) NOT NULL,
                      `first_name` varchar(100) NOT NULL,
                      `middle_name` varchar(100) DEFAULT NULL,
                      `last_name` varchar(100) NOT NULL,
                      `preferred_name` varchar(100) DEFAULT NULL,
                      `gender` char(1) NOT NULL COMMENT 'M for Male, F for Female',
                      `date_of_birth` date NOT NULL,
                      `date_of_death` date DEFAULT NULL,
                      `address` text,
                      `address_area_id` int(11) DEFAULT '0',
                      `birthplace_area_id` int(11) DEFAULT '0',
                      `postal_code` varchar(20) DEFAULT NULL,
                      `telephone` varchar(30) DEFAULT NULL,
                      `email` varchar(100) DEFAULT NULL,
                      `photo_name` varchar(250) DEFAULT '',
                      `photo_content` longblob,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`),
                      KEY `birthplace_area_id` (`birthplace_area_id`),
                      KEY `address_area_id` (`address_area_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <drop type="destination" table="teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `teachers`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `teachers`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `teachers` (
                        `id`, `identification_no`, `first_name`, `middle_name`, `last_name`, `preferred_name`, `gender`, `date_of_birth`, `date_of_death`, `address`,
                        `address_area_id`, `birthplace_area_id`, `postal_code`, `telephone`, `email`, `photo_name`,
                        `photo_content`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES (
                        :id, :identification_no, :first_name, :middle_name, :last_name, :preferred_name, :gender, :date_of_birth, :date_of_death, :address,
                        :address_area_id, :birthplace_area_id, :postal_code, :telephone, :email, :photo_name,
                        :photo_content, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `teachers`;
                        ]]>
            </SQL>
        </select>
    </process>

    <!-- Infrastructure subset -->
    <process name="infrastructure_buildings" type="lookup">
        <create type="destination" table="infrastructure_buildings">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `infrastructure_buildings` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `name` varchar(150) NOT NULL,
                      `order` int(3) NOT NULL,
                      `visible` int(1) NOT NULL DEFAULT '1',
                      `international_code` varchar(10) DEFAULT NULL,
                      `national_code` varchar(10) DEFAULT NULL,
                      `modified_user_id` int(11) DEFAULT NULL,
                      `modified` datetime DEFAULT NULL,
                      `created_user_id` int(11) NOT NULL,
                      `created` datetime NOT NULL,
                      PRIMARY KEY (`id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <drop type="destination" table="infrastructure_buildings">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `infrastructure_buildings`;
                        ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="infrastructure_buildings">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE `infrastructure_buildings`;
                        ]]>
            </SQL>
        </truncate>
        <insert type="destination" table="teacheinfrastructure_buildingsrs">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `infrastructure_buildings` (
                      `id`, `name`, `order`, `visible`, `international_code`, `national_code`, `modified_user_id`, `modified`, `created_user_id`, `created`
                    ) VALUES(
                      :id, :name, :order, :visible, :international_code, :national_code, :modified_user_id, :modified, :created_user_id, :created
                    );
                        ]]>
            </SQL>
        </insert>
        <select type="source" table="teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT * FROM `infrastructure_buildings`;
                        ]]>
            </SQL>
        </select>
    </process>


    <!-- Census Subset -->
    <process name="census_students" type="census">
        <drop type="destination" table="fact_census_students">
            <SQL dialect="mysql">
                <![CDATA[
					DROP TABLE `fact_census_students`;
				]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_students">
            <SQL dialect="mysql">
                <![CDATA[
					TRUNCATE TABLE fact_census_students;
				]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_students">
            <SQL dialect="mysql">
                <![CDATA[
					CREATE TABLE `fact_census_students` (
						  `value` int(11) DEFAULT NULL,
						  `sex` char(1) NOT NULL COMMENT 'M for Male, F for Female',
						  `age` int(11) DEFAULT NULL,
						  `student_categories_id` varchar(60) DEFAULT NULL,
						  `education_grades_id` varchar(60) DEFAULT NULL,
						  `education_programmes_id` varchar(60) DEFAULT NULL,
						  `education_field_of_studies_id` varchar(60) DEFAULT NULL,
						  `education_programme_orientations_id` varchar(60) DEFAULT NULL,
						  `education_cycles_id` varchar(60) DEFAULT NULL,
						  `education_certifications_id` varchar(60) DEFAULT NULL,
						  `institution_site_programmes_id` varchar(60) DEFAULT NULL,
						  `institution_sites_id` varchar(60) DEFAULT NULL,
						  `institution_site_localities_id` varchar(60) DEFAULT NULL,
						  `areas_id` varchar(60) DEFAULT NULL,
						  `area_levels_id` varchar(60) DEFAULT NULL,
						  `institution_site_types_id` varchar(60) DEFAULT NULL,
						  `institution_site_ownership_id` varchar(60) DEFAULT NULL,
						  `institution_site_statuses_id` varchar(60) DEFAULT NULL,
						  `institutions_id` varchar(60) DEFAULT NULL,
						  `institution_sectors_id` varchar(60) DEFAULT NULL,
						  `institution_providers_id` varchar(60) DEFAULT NULL,
						  `institution_statuses_id` varchar(60) DEFAULT NULL,
						  `school_years_id` varchar(60) DEFAULT NULL,
						  KEY `educationIndex` (`education_grades_id`,`education_programmes_id`,`education_field_of_studies_id`,`education_programme_orientations_id`,`education_cycles_id`,`education_certifications_id`),
						  KEY `areasIndex` (`areas_id`,`area_levels_id`),
						  KEY `schoolYearsIndex` (`school_years_id`),
						  KEY `institutionsIndex` (`institutions_id`,`institution_sectors_id`,`institution_providers_id`,`institution_statuses_id`),
						  KEY `institutionSitesIndex` (`institution_site_programmes_id`,`institution_sites_id`,`institution_site_localities_id`,`institution_site_types_id`,`institution_site_ownership_id`,`institution_site_statuses_id`)
					) ENGINE=InnoDB DEFAULT CHARSET=utf8;
				]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_students">
            <SQL dialect="mysql">
                <![CDATA[
					INSERT INTO `fact_census_students` (
						`value`,
						`sex`,
						`age` ,
						`student_categories_id`,
						`education_grades_id`,
						`education_programmes_id`,
						`education_field_of_studies_id`,
						`education_programme_orientations_id`,
						`education_cycles_id`,
						`education_certifications_id`,
						`institution_site_programmes_id`,
						`institution_sites_id`,
						`institution_site_localities_id`,
						`areas_id`,
						`area_levels_id`,
						`institution_site_types_id` ,
						`institution_site_ownership_id`,
						`institution_site_statuses_id` ,
						`institutions_id` ,
						`institution_sectors_id` ,
						`institution_providers_id` ,
						`institution_statuses_id` ,
						`school_years_id`
					) VALUES (
						:valueM, :genderM, :age, :student_categories_id, :education_grades_id, :education_programmes_id, :education_field_of_studies_id, :education_programme_orientations_id, :education_cycles_id, :education_certifications_id, :institution_site_programmes_id, :institution_sites_id, :institution_site_localities_id, :areas_id, :area_levels_id, :institution_site_types_id, :institution_site_ownership_id, :institution_site_statuses_id, :institutions_id, :institution_sectors_id, :institution_providers_id, :institution_statuses_id, :school_years_id
					),
					(
						:valueF, :genderF, :age, :student_categories_id, :education_grades_id, :education_programmes_id, :education_field_of_studies_id, :education_programme_orientations_id, :education_cycles_id, :education_certifications_id, :institution_site_programmes_id, :institution_sites_id, :institution_site_localities_id, :areas_id, :area_levels_id, :institution_site_types_id, :institution_site_ownership_id, :institution_site_statuses_id, :institutions_id, :institution_sectors_id, :institution_providers_id, :institution_statuses_id, :school_years_id
					)
				]]>
            </SQL>
        </insert>
        <select type="source" table="census_students">
            <SQL dialect="mysql">
                <![CDATA[
					SELECT
						/* census table values + discrete variables like age */
						census_students.male as valueM, census_students.female as valueF, 'M' AS `genderM`, 'F' AS `genderF`,  census_students.age ,
						/* all foreign keys */
						student_categories.id AS student_categories_id ,
						education_grades.id AS education_grades_id,
						education_programmes.id AS education_programmes_id,
						education_field_of_studies.id AS education_field_of_studies_id,
						education_programme_orientations.id AS education_programme_orientations_id,
						education_cycles.id AS education_cycles_id,
						education_certifications.id AS education_certifications_id,
						institution_site_programmes.id AS institution_site_programmes_id,
						institution_sites.id AS institution_sites_id,
						institution_site_localities.id AS institution_site_localities_id,
						areas.id AS areas_id,
						area_levels.id AS area_levels_id,
						institution_site_types.id AS institution_site_types_id,
						institution_site_ownership.id AS institution_site_ownership_id,
						institution_site_statuses.id AS institution_site_statuses_id,
						institutions.id AS institutions_id,
						institution_sectors.id AS institution_sectors_id,
						institution_providers.id AS institution_providers_id,
						institution_statuses.id AS institution_statuses_id,
						school_years.id AS school_years_id

					FROM
						census_students
					LEFT JOIN student_categories on census_students.student_category_id = student_categories.id
					/* joining all linked education tables */
					LEFT JOIN education_grades on census_students.education_grade_id =  education_grades.id
						LEFT JOIN education_programmes on education_grades.education_programme_id = education_programmes.id
							LEFT JOIN education_field_of_studies on education_programmes.education_field_of_study_id = education_field_of_studies.id
								LEFT JOIN education_programme_orientations on education_field_of_studies.education_programme_orientation_id = education_programme_orientations.id
							LEFT JOIN education_cycles on education_programmes.education_cycle_id = education_cycles.id
								LEFT JOIN education_levels on education_cycles.education_level_id = education_levels.id
									LEFT JOIN education_level_isced on education_levels.education_level_isced_id = education_level_isced.id
									LEFT JOIN education_systems on education_levels.education_system_id = education_systems.id
							LEFT JOIN education_certifications on education_programmes.education_certification_id = education_certifications.id
					/* joining through institution */
					LEFT JOIN institution_sites on census_students.institution_site_id = institution_sites.id
					    LEFT JOIN areas ON institution_sites.area_id = areas.id
					        LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
					    LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
					        LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
					        LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
					        LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
--                         LEFT JOIN institution_site_classes ON institution_sites.id = institution_site_classes.institution_site_id
--                             LEFT JOIN institution_site_class_grades ON institution_site_classes.id = institution_site_class_grades.institution_site_class_id
                        LEFT JOIN institution_site_programmes ON institution_sites.id = institution_site_programmes.institution_site_id
                    LEFT JOIN school_years on census_students.school_year_id = school_years.id;

				]]>
            </SQL>
        </select>
    </process>
    <process name="census_buildings" type="census">
        <drop type="destination" table="fact_census_buildings">
            <SQL dialect="mysql">
                <![CDATA[
					DROP TABLE `fact_census_buildings`;
				]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_buildings">
            <SQL dialect="mysql">
                <![CDATA[
					TRUNCATE TABLE fact_census_buildings;
				]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_buildings">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_buildings` (
                      `value` int(11) DEFAULT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `infrastructure_building_id` int(11) DEFAULT NULL,
                      `infrastructure_material_id` int(11) DEFAULT NULL,
                      `infrastructure_category_id` int(11) DEFAULT NULL,
                      `infrastructure_status_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      KEY `school_year_id` (`school_year_id`),
                      KEY `source` (`source`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
				]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_buildings">
            <SQL dialect="mysql">
                <![CDATA[
					INSERT INTO `fact_census_buildings` (
					    `value`, `source`, `infrastructure_building_id`, `infrastructure_material_id`,
					    `infrastructure_category_id`, `infrastructure_status_id`, `institution_site_id`,
					    `institution_site_locality_id`, `institution_site_type_id`, `institution_site_ownership_id`,
					    `institution_site_status_id`, `institution_id`, `institution_sector_id`, `institution_provider_id`,
					    `institution_status_id`, `area_id`, `area_level_id`, `school_year_id`
                    ) VALUES (
                        :value, :source, :infrastructure_building_id, :infrastructure_material_id, :infrastructure_category_id,
                        :infrastructure_status_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :institution_id, :institution_sector_id, :institution_provider_id, :institution_status_id,
                        :area_id, :area_level_id, :school_year_id);


				]]>
            </SQL>
        </insert>
        <select type="source" table="census_buildings">
            <SQL dialect="mysql">
                <![CDATA[
					SELECT
						/* census table values + source */
						census_buildings.value AS value,
						 census_buildings.source AS source,
						/* all foreign keys */
						census_buildings.infrastructure_building_id AS infrastructure_building_id,
						census_buildings.infrastructure_material_id AS infrastructure_material_id,
						infrastructure_categories.id AS infrastructure_category_id,
						infrastructure_statuses.id AS infrastructure_status_id,
						census_buildings.institution_site_id AS institution_site_id,
						institution_site_localities.id AS institution_site_locality_id,
						institution_site_types.id AS institution_site_type_id,
						institution_site_ownership.id AS institution_site_ownership_id,
						institution_site_statuses.id AS institution_site_status_id,
						institutions.id AS institution_id,
						institution_sectors.id AS institution_sector_id,
						institution_providers.id AS institution_provider_id,
						institution_statuses.id AS institution_status_id,
						areas.id AS area_id,
						area_levels.id AS area_level_id,
						school_years.id AS school_year_id

					FROM
						census_buildings
					/* joining all linked infrastructure tables */
					LEFT JOIN infrastructure_buildings ON census_buildings.infrastructure_building_id = infrastructure_buildings.id
					LEFT JOIN infrastructure_materials ON census_buildings.infrastructure_material_id = infrastructure_materials.id
						LEFT JOIN infrastructure_categories ON infrastructure_materials.infrastructure_category_id = infrastructure_categories.id
					LEFT JOIN infrastructure_statuses ON census_buildings.infrastructure_status_id = infrastructure_statuses.id
					/* joining through institution site */
					LEFT JOIN institution_sites ON census_buildings.institution_site_id = institution_sites.id
						LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
						LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
						LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
						LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
						LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
							LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
							LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
							LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                        LEFT JOIN areas ON institution_sites.area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
 					LEFT JOIN school_years on census_buildings.school_year_id = school_years.id;

				]]>
            </SQL>
        </select>
    </process>
    <process name="census_classes" type="census">
        <drop type="destination" table="fact_census_classes">
            <SQL dialect="mysql">
                <![CDATA[
					DROP TABLE `fact_census_classes`;
				]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_classes">
            <SQL dialect="mysql">
                <![CDATA[
					TRUNCATE TABLE fact_census_classes;
				]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_classes">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_classes` (
                      `classes` int(5) DEFAULT NULL,
                      `seats` int(11) DEFAULT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      `education_grade_id` int(11) DEFAULT NULL,
                      `education_programme_id` int(11) DEFAULT NULL,
                      `education_field_of_study_id` int(11) DEFAULT NULL,
                      `education_programme_orientation_id` int(11) DEFAULT NULL,
                      `education_cycle_id` int(11) DEFAULT NULL,
                      `education_level_id` int(11) DEFAULT NULL,
                      `education_system_id` int(11) DEFAULT NULL,
                      `education_level_isced_id` int(11) DEFAULT NULL,
                      `education_certification_id` int(11) DEFAULT NULL,
                      KEY `school_year_id` (`institution_site_locality_id`),
                      KEY `source` (`source`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `institution_id` (`institution_id`),
                      KEY `education` (`education_grade_id`,`education_programme_id`,`education_field_of_study_id`,`education_programme_orientation_id`,`education_cycle_id`,`education_level_id`,`education_system_id`,`education_level_isced_id`,`education_certification_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
				]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_classes">
            <SQL dialect="mysql">
                <![CDATA[
					INSERT INTO `fact_census_classes` (
					    `classes`, `seats`, `source`, `institution_site_id`, `institution_site_locality_id`,
					    `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_status_id`,
					    `institution_id`, `school_year_id`, `education_grade_id`, `education_programme_id`,
					    `education_field_of_study_id`, `education_programme_orientation_id`, `education_cycle_id`,
					    `education_level_id`, `education_system_id`, `education_level_isced_id`,
					    `education_certification_id`
					) VALUES (
					    :classes, :seats, :source, :institution_site_id, :institution_site_locality_id,
					    :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
					    :institution_id, :school_year_id, :education_grade_id, :education_programme_id,
					    :education_field_of_study_id, :education_programme_orientation_id, :education_cycle_id,
					    :education_level_id, :education_system_id, :education_level_isced_id,
					    :education_certification_id
                    );

				]]>
            </SQL>
        </insert>
        <select type="source" table="census_classes">
            <SQL dialect="mysql">
                <![CDATA[
					SELECT
                        census_classes.classes AS classes,
                        census_classes.seats AS seats,
                        census_classes.source AS source,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        institutions.id AS institution_id,
                        school_years.id AS school_year_id,
                        education_grades.id AS education_grade_id,
                        education_programmes.id AS education_programme_id,
                        education_field_of_studies.id AS education_field_of_study_id,
                        education_programme_orientations.id AS education_programme_orientation_id,
                        education_cycles.id AS education_cycle_id ,
                        education_levels.id AS education_level_id ,
                        education_systems.id AS education_system_id,
                        education_level_isced.id AS education_level_isced_id,
                        education_certifications.id AS education_certification_id
                    FROM census_classes
                    /* joining instiution site */
                    LEFT JOIN institution_sites ON census_classes.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                        LEFT JOIN areas ON institution_sites.area_id = areas.id
                                LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                    /* joining school years */
                    LEFT JOIN school_years ON census_classes.school_year_id = school_years.id
                    /* joining class grade */
                    LEFT JOIN census_class_grades ON census_classes.id = census_class_grades.census_class_id
                        LEFT JOIN education_grades ON census_class_grades.education_grade_id = education_grades.id
                            LEFT JOIN education_programmes ON education_grades.education_programme_id = education_programmes.id
                                LEFT JOIN education_field_of_studies ON education_programmes.education_field_of_study_id = education_field_of_studies.id
                                    LEFT JOIN education_programme_orientations ON education_field_of_studies.education_programme_orientation_id = education_programme_orientations.id
                                LEFT JOIN education_cycles ON education_programmes.education_cycle_id = education_cycles.id
                                    LEFT JOIN education_levels ON education_cycles.education_level_id = education_levels.id
                                        LEFT JOIN education_systems ON education_levels.education_system_id = education_systems.id
                                        LEFT JOIN education_level_isced ON education_levels.education_level_isced_id = education_level_isced.id
                                LEFT JOIN education_certifications ON education_programmes.education_certification_id = education_certifications.id;

				]]>
            </SQL>
        </select>
    </process>
    <process name="census_energy" type="census">
        <drop type="destination" table="fact_census_energy">
            <SQL dialect="mysql">
                <![CDATA[
					DROP TABLE `fact_census_energy`;
				]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_energy">
            <SQL dialect="mysql">
                <![CDATA[
					TRUNCATE TABLE fact_census_energy;
				]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_energy">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_energy` (
                      `value` int(11) DEFAULT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `infrastructure_energy_id` int(11) DEFAULT NULL,
                      `infrastructure_status_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      KEY `school_year_id` (`area_id`),
                      KEY `source` (`source`),
                      KEY `infrastructure` (`infrastructure_energy_id`,`infrastructure_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
				]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_energy">
            <SQL dialect="mysql">
                <![CDATA[
					INSERT INTO `fact_census_energy` (
					    `value`, `source`, `infrastructure_energy_id`, `infrastructure_status_id`,
					    `institution_site_id`, `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`,
					    `institution_provider_id`, `institution_status_id`, `institution_site_locality_id`,
					    `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_status_id`,
					    `school_year_id`
					)VALUES (
					    :value, :source, :infrastructure_energy_id, :infrastructure_status_id,
					    :institution_site_id, :area_id, :area_level_id, :institution_id, :institution_sector_id,
					    :institution_provider_id, :institution_status_id, :institution_site_locality_id,
					    :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
					    :school_year_id
                    );


				]]>
            </SQL>
        </insert>
        <select type="source" table="census_energy">
            <SQL dialect="mysql">
                <![CDATA[
					SELECT
                        census_energy.value AS `value`,
                        census_energy.source AS `source`,
                        infrastructure_energy.id AS infrastructure_energy_id,
                        infrastructure_statuses.id AS infrastructure_status_id,
                        institution_sites.id AS institution_site_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        school_years.id AS school_year_id
                    FROM census_energy
                    LEFT JOIN infrastructure_energy ON census_energy.infrastructure_energy_id = infrastructure_energy.id
                    LEFT JOIN infrastructure_statuses ON census_energy.infrastructure_status_id = infrastructure_statuses.id
                    LEFT JOIN institution_sites ON census_energy.institution_site_id = institution_sites.id
                        LEFT JOIN areas ON institution_sites.area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id =institution_statuses.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                    LEFT JOIN school_years ON census_energy.school_year_id = school_years.id;

				]]>
            </SQL>
        </select>
    </process>
    <process name="census_finances" type="census">
        <drop type="destination" table="fact_census_finances">
            <SQL dialect="mysql">
                <![CDATA[
					DROP TABLE `fact_census_finances`;
				]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_finances">
            <SQL dialect="mysql">
                <![CDATA[
					TRUNCATE TABLE fact_census_finances;
				]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_finances">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_finances` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `description` varchar(150) NOT NULL,
                      `amount` float(11,2) NOT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `finance_source_id` int(11) NOT NULL,
                      `finance_category_id` int(11) NOT NULL,
                      `finance_type_id` int(11) NOT NULL,
                      `finance_nature_id` int(11) NOT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `source` (`source`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `finance` (`finance_source_id`,`finance_category_id`,`finance_type_id`,`finance_nature_id`),
                      KEY `school_year_id` (`school_year_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

				]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_finances">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_finances` (
                        `id`, `description`, `amount`, `source`, `finance_source_id`, `finance_category_id`,
                        `finance_type_id`, `finance_nature_id`, `institution_site_id`, `institution_site_locality_id`,
                        `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_status_id`,
                        `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`, `institution_provider_id`,
                        `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :id, :description, :amount, :source, :finance_source_id, :finance_category_id,
                        :finance_type_id, :finance_nature_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :school_year_id
                    );
				]]>
            </SQL>
        </insert>
        <select type="source" table="census_finances">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_finances.id AS id,
                        census_finances.description AS description,
                        census_finances.amount AS amount,
                        census_finances.source AS source,
                        finance_sources.id AS finance_source_id,
                        finance_categories.id AS finance_category_id,
                        finance_types.id AS finance_type_id,
                        finance_natures.id AS finance_nature_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_finances
                    INNER JOIN finance_sources ON census_finances.finance_source_id = finance_sources.id
                    LEFT JOIN finance_categories ON census_finances.finance_category_id = finance_categories.id
                        LEFT JOIN finance_types ON finance_categories.finance_type_id = finance_types.id
                            LEFT JOIN finance_natures ON finance_types.finance_nature_id = finance_natures.id
                    LEFT JOIN institution_sites ON census_finances.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN school_years ON census_finances.school_year_id = school_years.id;

				]]>
            </SQL>
        </select>
    </process>
    <process name="census_furniture" type="census">
        <drop type="destination" table="fact_census_furniture">
            <SQL dialect="mysql">
                <![CDATA[
					DROP TABLE `fact_census_furniture`;
				]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_furniture">
            <SQL dialect="mysql">
                <![CDATA[
					TRUNCATE TABLE fact_census_furniture;
				]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_furniture">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_furniture` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `infrastructure_furniture_id` int(11) DEFAULT NULL,
                      `infrastructure_status_id` int(11) DEFAULT NULL,
                      `infrastructure_category_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `source` (`source`),
                      KEY `infrastructure` (`infrastructure_furniture_id`,`infrastructure_status_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`),
                      KEY `school_year_id` (`school_year_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
				]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_furniture">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_furniture` (
                        `id`, `value`, `source`, `infrastructure_furniture_id`, `infrastructure_status_id`,
                        `infrastructure_category_id`, `institution_site_id`, `institution_site_locality_id`,
                        `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_status_id`,
                        `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`, `institution_provider_id`,
                        `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :id, :value, :source, :infrastructure_furniture_id, :infrastructure_status_id,
                        :infrastructure_category_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :school_year_id
                    );

				]]>
            </SQL>
        </insert>
        <select type="source" table="census_furniture">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
						census_furniture.id AS id,
						census_furniture.value AS 'value',
						census_furniture.source AS source,
						infrastructure_furniture.id AS infrastructure_furniture_id,
						infrastructure_statuses.id AS infrastructure_status_id,
						infrastructure_categories.id AS infrastructure_category_id,
						institution_sites.id AS institution_site_id,
						institution_site_localities.id AS institution_site_locality_id,
						institution_site_types.id AS institution_site_type_id,
						institution_site_ownership.id AS institution_site_ownership_id,
						institution_site_statuses.id AS institution_site_status_id,
						areas.id AS area_id,
						area_levels.id AS area_level_id,
						institutions.id AS institution_id,
						institution_sectors.id AS institution_sector_id,
						institution_providers.id AS institution_provider_id,
						institution_statuses.id AS institution_status_id,
						school_years.id AS school_year_id
					FROM census_furniture
					LEFT JOIN infrastructure_furniture ON infrastructure_furniture_id = infrastructure_furniture.id
					LEFT JOIN infrastructure_statuses ON infrastructure_status_id = infrastructure_statuses.id
						LEFT JOIN infrastructure_categories ON infrastructure_statuses.infrastructure_category_id = infrastructure_categories.id
                    LEFT JOIN institution_sites ON census_furniture.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN school_years ON census_furniture.school_year_id = school_years.id;
				]]>
            </SQL>
        </select>
    </process>
    <process name="census_graduates" type="census">
        <drop type="destination" table="fact_census_graduates">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_graduates`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_graduates">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_graduates;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_graduates">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_graduates` (
--                    `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
					  `sex` char(1) NOT NULL COMMENT 'M for Male, F for Female',
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `education_programme_id` int(11) DEFAULT NULL,
                      `education_field_of_study_id` int(11) DEFAULT NULL,
                      `education_programme_orientation_id` int(11) DEFAULT NULL,
                      `education_cycle_id` int(11) DEFAULT NULL,
                      `education_level_id` int(11) DEFAULT NULL,
                      `education_system_id` int(11) DEFAULT NULL,
                      `education_level_isced_id` int(11) DEFAULT NULL,
                      `education_certification_id` int(11) DEFAULT NULL,
                      `institution_site_programme_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
--                      PRIMARY KEY (`id`),
                      KEY `source` (`source`),
                      KEY `education` (`education_programme_id`,`education_field_of_study_id`,`education_programme_orientation_id`,`education_cycle_id`,`education_system_id`,`education_level_id`,`education_level_isced_id`,`education_certification_id`),
                      KEY `institution_site` (`institution_site_programme_id`,`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`),
                      KEY `school_year_id` (`school_year_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_graduates">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_graduates` (
                        `value`, `sex`, `source`, `education_programme_id`, `education_field_of_study_id`,
                        `education_programme_orientation_id`, `education_cycle_id`, `education_level_id`,
                        `education_system_id`, `education_level_isced_id`, `education_certification_id`,
                        `institution_site_programme_id`, `institution_site_id`, `institution_site_locality_id`,
                        `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_status_id`,
                        `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`, `institution_provider_id`,
                        `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :male, :genderM, :source, :education_programme_id, :education_field_of_study_id,
                        :education_programme_orientation_id, :education_cycle_id, :education_level_id,
                        :education_system_id, :education_level_isced_id, :education_certification_id,
                        :institution_site_programme_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :school_year_id
                    ),
                    (
                        :female, :genderF, :source, :education_programme_id, :education_field_of_study_id,
                        :education_programme_orientation_id, :education_cycle_id, :education_level_id,
                        :education_system_id, :education_level_isced_id, :education_certification_id,
                        :institution_site_programme_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :school_year_id
                    );
                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_graduates">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_graduates.male AS male,
                        census_graduates.female AS female,
                        'M' AS `genderM`,
                        'F' AS `genderF`,
                        census_graduates.source AS source,
                        education_programmes.id AS education_programme_id,
                        education_field_of_studies.id AS education_field_of_study_id,
                        education_programme_orientations.id AS education_programme_orientation_id,
                        education_cycles.id AS education_cycle_id,
                        education_levels.id AS education_level_id,
                        education_systems.id AS education_system_id,
                        education_level_isced.id AS education_level_isced_id,
                        education_certifications.id AS education_certification_id,
                        institution_site_programmes.id AS institution_site_programme_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_graduates
                    /* joining through institution */
					LEFT JOIN institution_sites ON census_graduates.institution_site_id = institution_sites.id
					    LEFT JOIN areas ON institution_sites.area_id = areas.id
					        LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
					    LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
					        LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
					        LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
					        LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
--                         LEFT JOIN institution_site_classes ON institution_sites.id = institution_site_classes.institution_site_id
--                             LEFT JOIN institution_site_class_grades ON institution_site_classes.id = institution_site_class_grades.institution_site_class_id
                        LEFT JOIN institution_site_programmes ON institution_sites.id = institution_site_programmes.institution_site_id
                    /* joining through education programmes */
					LEFT JOIN education_programmes ON census_graduates.education_programme_id = education_programmes.id
						LEFT JOIN education_cycles ON education_programmes.education_cycle_id = education_cycles.id
							LEFT JOIN education_levels ON education_cycles.education_level_id = education_levels.id
								LEFT JOIN education_systems ON education_levels.education_system_id = education_systems.id
								LEFT JOIN education_level_isced ON education_levels.education_level_isced_id = education_level_isced.id
						LEFT JOIN education_field_of_studies ON education_programmes.education_field_of_study_id = education_field_of_studies.id
							LEFT JOIN education_programme_orientations ON education_field_of_studies.education_programme_orientation_id = education_programme_orientations.id
						LEFT JOIN education_certifications ON education_programmes.education_certification_id = education_certifications.id
						LEFT JOIN education_grades ON education_programmes.id = education_grades.education_programme_id
--							LEFT JOIN education_grades_subjects ON education_grades.id = education_grades_subjects.education_grade_id
--							LEFT JOIN education_subjects ON education_grades_subjects.education_subject_id = education_subjects.id
					LEFT JOIN school_years ON census_graduates.school_year_id = school_years.id;

                ]]>
            </SQL>
        </select>
    </process>
    <process name="census_resources" type="census">
        <drop type="destination" table="fact_census_resources">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_resources`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_resources">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_resources;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_resources">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_resources` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `infrastructure_resource_id` int(11) DEFAULT NULL,
                      `infrastructure_status_id` int(11) DEFAULT NULL,
                      `infrastructure_category_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `source` (`source`),
                      KEY `infrastructure` (`infrastructure_resource_id`,`infrastructure_status_id`,`infrastructure_category_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`),
                      KEY `school_year_id` (`school_year_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_resources">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_resources` (
                        `id`, `value`, `source`, `infrastructure_resource_id`, `infrastructure_status_id`,
                        `infrastructure_category_id`, `institution_site_id`, `institution_site_locality_id`,
                        `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_status_id`,
                        `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`, `institution_provider_id`,
                        `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :id, :value, :source, :infrastructure_resource_id, :infrastructure_status_id,
                        :infrastructure_category_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :school_year_id
                    );

                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_resources">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_resources.id AS id,
                        census_resources.value AS 'value',
                        census_resources.source AS source,
                        infrastructure_resources.id AS infrastructure_resource_id,
                        infrastructure_statuses.id AS infrastructure_status_id,
                        infrastructure_categories.id AS infrastructure_category_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_resources
                    LEFT JOIN infrastructure_resources ON census_resources.infrastructure_resource_id = infrastructure_resources.id
                    LEFT JOIN infrastructure_statuses ON census_resources.infrastructure_status_id = infrastructure_statuses.id
                        LEFT JOIN infrastructure_categories ON infrastructure_statuses.infrastructure_category_id = infrastructure_categories.id
                    LEFT JOIN institution_sites ON census_resources.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN school_years ON census_resources.school_year_id = school_years.id
                ]]>
            </SQL>
        </select>
    </process>
    <process name="census_rooms" type="census">
        <drop type="destination" table="fact_census_rooms">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_rooms`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_rooms">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_rooms;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_rooms">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_rooms` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) NOT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `infrastructure_room_id` int(11) NOT NULL,
                      `infrastructure_status_id` int(11) NOT NULL,
                      `infrastructure_category_id` int(11) NOT NULL,
                      `institution_site_id` int(11) NOT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `source` (`source`),
                      KEY `infrastructure` (`infrastructure_room_id`,`infrastructure_status_id`,`infrastructure_category_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`),
                      KEY `school_year_id` (`school_year_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_rooms">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_rooms` (
                        `id`, `value`, `source`, `infrastructure_room_id`, `infrastructure_status_id`, `infrastructure_category_id`,
                        `institution_site_id`, `institution_site_locality_id`, `institution_site_type_id`, `institution_site_ownership_id`,
                        `institution_site_status_id`, `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`,
                        `institution_provider_id`, `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :id, :value, :source, :infrastructure_room_id, :infrastructure_status_id, :infrastructure_category_id,
                        :institution_site_id, :institution_site_locality_id, :institution_site_type_id, :institution_site_ownership_id,
                        :institution_site_status_id, :area_id, :area_level_id, :institution_id, :institution_sector_id,
                        :institution_provider_id, :institution_status_id, :school_year_id
                    );

                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_rooms">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_rooms.id AS id,
                        census_rooms.value AS 'value',
                        census_rooms.source AS source,
                        infrastructure_rooms.id AS infrastructure_room_id,
                        infrastructure_statuses.id AS infrastructure_status_id,
                        infrastructure_categories.id AS infrastructure_category_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_rooms
                    LEFT JOIN infrastructure_rooms ON census_rooms.infrastructure_room_id = infrastructure_rooms.id
                    LEFT JOIN infrastructure_statuses ON census_rooms.infrastructure_status_id = infrastructure_statuses.id
                        LEFT JOIN infrastructure_categories ON infrastructure_statuses.infrastructure_category_id = infrastructure_categories.id
                    LEFT JOIN institution_sites ON census_rooms.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN school_years ON census_rooms.school_year_id = school_years.id
                ]]>
            </SQL>
        </select>
    </process>
    <process name="census_sanitations" type="census">
        <drop type="destination" table="fact_census_sanitations">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_sanitations`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_sanitations">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_sanitations;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_sanitations">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_sanitations` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
				      `sex` char(1) NOT NULL COMMENT 'M for Male, F for Female',
                      `unisex` int(11) DEFAULT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `infrastructure_sanitation_id` int(11) DEFAULT NULL,
                      `infrastructure_material_id` int(11) DEFAULT NULL,
                      `infrastructure_categories_id` int(11) DEFAULT NULL,
                      `infrastructure_status_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `school_year_id` (`school_year_id`),
                      KEY `source` (`source`),
                      KEY `infrastructure` (`infrastructure_sanitation_id`,`infrastructure_material_id`,`infrastructure_categories_id`,`infrastructure_status_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`)
                    ) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_sanitations">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_sanitations` (
                        `value`, `sex`, `unisex`, `source`, `infrastructure_sanitation_id`, `infrastructure_material_id`,
                        `infrastructure_categories_id`, `infrastructure_status_id`, `institution_site_id`, `institution_site_locality_id`,
                        `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_status_id`, `area_id`, `area_level_id`,
                        `institution_id`, `institution_sector_id`, `institution_provider_id`, `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :male, :genderM, :unisex, :source, :infrastructure_sanitation_id, :infrastructure_material_id,
                        :infrastructure_categories_id, :infrastructure_status_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id, :area_id, :area_level_id,
                        :institution_id, :institution_sector_id, :institution_provider_id, :institution_status_id, :school_year_id
                    ),
                    (
                        :female, :genderF, :unisex, :source, :infrastructure_sanitation_id, :infrastructure_material_id,
                        :infrastructure_categories_id, :infrastructure_status_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id, :area_id, :area_level_id,
                        :institution_id, :institution_sector_id, :institution_provider_id, :institution_status_id, :school_year_id
                    );

                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_sanitations">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_sanitations.id AS id,
                        census_sanitations.male AS male,
                        census_sanitations.female AS female,
                        'M' AS `genderM`,
                        'F' AS `genderF`,
                        census_sanitations.unisex AS unisex,
                        census_sanitations.source AS source,
                        infrastructure_sanitations.id AS infrastructure_sanitation_id,
                        infrastructure_materials.id AS infrastructure_material_id,
                        infrastructure_categories.id AS infrastructure_categories_id,
                        infrastructure_statuses.id AS infrastructure_status_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_sanitations
                    LEFT JOIN infrastructure_sanitations ON census_sanitations.infrastructure_sanitation_id = infrastructure_sanitations.id
                    LEFT JOIN infrastructure_materials ON census_sanitations.infrastructure_material_id = infrastructure_materials.id
                        LEFT JOIN infrastructure_categories ON infrastructure_materials.infrastructure_category_id = infrastructure_categories.id
                    LEFT JOIN infrastructure_statuses ON census_sanitations.infrastructure_status_id = infrastructure_statuses.id
                    LEFT JOIN institution_sites ON census_sanitations.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN school_years ON census_sanitations.school_year_id = school_years.id
                ]]>
            </SQL>
        </select>
    </process>
    <process name="census_staff" type="census">
        <drop type="destination" table="fact_census_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_staff`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_staff;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_staff` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
				      `sex` char(1) NOT NULL COMMENT 'M for Male, F for Female',
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `staff_category_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `school_year_id` (`school_year_id`),
                      KEY `source` (`source`),
                      KEY `staff_category_id` (`staff_category_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_staff` (
                        `value`, `sex`, `source`, `staff_category_id`, `institution_site_id`,
                        `institution_site_locality_id`, `institution_site_type_id`, `institution_site_ownership_id`,
                        `institution_site_status_id`, `area_id`, `area_level_id`, `institution_id`,
                        `institution_sector_id`, `institution_provider_id`, `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :male, :genderM, :source, :staff_category_id, :institution_site_id,
                        :institution_site_locality_id, :institution_site_type_id, :institution_site_ownership_id,
                        :institution_site_status_id, :area_id, :area_level_id, :institution_id,
                        :institution_sector_id, :institution_provider_id, :institution_status_id, :school_year_id
                    ),
                    (
                        :female, :genderF, :source, :staff_category_id, :institution_site_id,
                        :institution_site_locality_id, :institution_site_type_id, :institution_site_ownership_id,
                        :institution_site_status_id, :area_id, :area_level_id, :institution_id,
                        :institution_sector_id, :institution_provider_id, :institution_status_id, :school_year_id
                    );
                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_staff">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_staff.id AS id,
                        census_staff.male AS male,
                        census_staff.female AS female,
                        'M' AS `genderM`,
                        'F' AS `genderF`,
                        census_staff.source AS source,
                        staff_categories.id AS staff_category_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_staff
                    LEFT JOIN staff_categories ON staff_category_id = staff_categories.id
                    LEFT JOIN institution_sites ON census_staff.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN school_years ON census_staff.school_year_id = school_years.id;
                ]]>
            </SQL>
        </select>
    </process>
    <process name="census_teacher_fte" type="census">
        <drop type="destination" table="fact_census_teacher_fte">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_teacher_fte`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_teacher_fte">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_teacher_fte;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_teacher_fte">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_teacher_fte` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
					  `sex` char(1) NOT NULL COMMENT 'M for Male, F for Female',
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `education_level_id` int(11) DEFAULT NULL,
                      `education_system_id` int(11) DEFAULT NULL,
                      `education_level_isced_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_statuses_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `school_year_id` (`school_year_id`),
                      KEY `source` (`source`),
                      KEY `education` (`education_level_id`,`education_level_isced_id`,`education_system_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_statuses_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_teacher_fte">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_teacher_fte` (
                        `value`, `sex`, `source`, `education_level_id`, `education_system_id`,
                        `education_level_isced_id`, `institution_site_id`, `institution_site_locality_id`,
                        `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_statuses_id`,
                        `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`, `institution_provider_id`,
                        `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :male, :genderM, :source, :education_level_id, :education_system_id,
                        :education_level_isced_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_statuses_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :school_year_id
                    ),
                    (
                        :female, :genderF, :source, :education_level_id, :education_system_id,
                        :education_level_isced_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_statuses_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :school_year_id
                    );

                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_teacher_fte">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_teacher_fte.id AS id,
                        census_teacher_fte.male AS male,
                        census_teacher_fte.female AS female,
                        'M' AS `genderM`,
                        'F' AS `genderF`,
                        census_teacher_fte.source AS source,
                        education_levels.id AS education_level_id,
                        education_systems.id AS education_system_id,
                        education_level_isced.id AS education_level_isced_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_statuses_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_teacher_fte
                    LEFT JOIN education_levels ON census_teacher_fte.education_level_id = education_levels.id
                        LEFT JOIN education_systems ON education_levels.education_system_id = education_systems.id
                        LEFT JOIN education_level_isced ON education_levels.education_level_isced_id = education_level_isced.id
                    LEFT JOIN institution_sites ON census_teacher_fte.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN school_years ON census_teacher_fte.school_year_id = school_years.id;
                ]]>
            </SQL>
        </select>
    </process>
    <process name="census_teacher_training" type="census">
        <drop type="destination" table="fact_census_teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_teacher_training`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_teacher_training;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_teacher_training` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
					  `sex` char(1) NOT NULL COMMENT 'M for Male, F for Female',
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `education_level_id` int(11) DEFAULT NULL,
                      `education_system_id` int(11) DEFAULT NULL,
                      `education_level_isced_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `school_year_id` (`school_year_id`),
                      KEY `source` (`source`),
                      KEY `education` (`education_level_id`,`education_level_isced_id`,`education_system_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_teacher_training` (
                        `value`, `sex`, `source`, `education_level_id`, `education_system_id`,
                        `education_level_isced_id`, `institution_site_id`, `institution_site_locality_id`,
                        `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_status_id`,
                        `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`, `institution_provider_id`,
                        `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :male, :genderM, :source, :education_level_id, :education_system_id,
                        :education_level_isced_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :school_year_id
                    ),
                    (
                        :female, :genderF, :source, :education_level_id, :education_system_id,
                        :education_level_isced_id, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :school_year_id
                    );
                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_teacher_training">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_teacher_training.id AS id,
                        census_teacher_training.male AS male,
                        census_teacher_training.female AS female,
                        'M' AS `genderM`,
                        'F' AS `genderF`,
                        census_teacher_training.source AS source,
                        education_levels.id AS education_level_id,
                        education_systems.id AS education_system_id,
                        education_level_isced.id AS education_level_isced_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_teacher_training
                    LEFT JOIN education_levels ON census_teacher_training.education_level_id = education_levels.id
                        LEFT JOIN education_systems ON education_levels.education_system_id = education_systems.id
                        LEFT JOIN education_level_isced ON education_levels.education_level_isced_id = education_level_isced.id
                    LEFT JOIN institution_sites ON census_teacher_training.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN school_years ON census_teacher_training.school_year_id = school_years.id;
                ]]>
            </SQL>
        </select>
    </process>
    <process name="census_teachers" type="census">
        <drop type="destination" table="fact_census_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_teachers`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_teachers;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_teachers` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
					  `sex` char(1) NOT NULL COMMENT 'M for Male, F for Female',
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `education_grade_id` int(11) DEFAULT NULL,
                      `education_programme_id` int(11) DEFAULT NULL,
                      `education_field_of_study_id` int(11) DEFAULT NULL,
                      `education_programme_orientation_id` int(11) DEFAULT NULL,
                      `education_cycle_id` int(11) DEFAULT NULL,
                      `education_level_id` int(11) DEFAULT NULL,
                      `education_system_id` int(11) DEFAULT NULL,
                      `education_level_isced_id` int(11) DEFAULT NULL,
                      `education_certification_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `school_year_id` (`school_year_id`),
                      KEY `source` (`source`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`),
                      KEY `education` (`education_grade_id`,`education_programme_id`,`education_field_of_study_id`,`education_programme_orientation_id`,`education_cycle_id`,`education_level_id`,`education_system_id`,`education_level_isced_id`,`education_certification_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_teachers` (
                        `value`, `sex`, `source`, `institution_site_id`, `institution_site_locality_id`,
                        `institution_site_type_id`, `institution_site_ownership_id`, `institution_site_status_id`,
                        `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`, `institution_provider_id`,
                        `institution_status_id`, `education_grade_id`, `education_programme_id`, `education_field_of_study_id`,
                        `education_programme_orientation_id`, `education_cycle_id`, `education_level_id`, `education_system_id`,
                        `education_level_isced_id`, `education_certification_id`, `school_year_id`
                    ) VALUES (
                        :male, :genderM, :source, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :education_grade_id, :education_programme_id, :education_field_of_study_id,
                        :education_programme_orientation_id, :education_cycle_id, :education_level_id, :education_system_id,
                        :education_level_isced_id, :education_certification_id, :school_year_id
                    ),
                    (
                        :female, :genderF, :source, :institution_site_id, :institution_site_locality_id,
                        :institution_site_type_id, :institution_site_ownership_id, :institution_site_status_id,
                        :area_id, :area_level_id, :institution_id, :institution_sector_id, :institution_provider_id,
                        :institution_status_id, :education_grade_id, :education_programme_id, :education_field_of_study_id,
                        :education_programme_orientation_id, :education_cycle_id, :education_level_id, :education_system_id,
                        :education_level_isced_id, :education_certification_id, :school_year_id
                    );

                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_teachers">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
--                        census_teachers.id AS id,
                        census_teachers.male AS male,
                        census_teachers.female AS female,
                        'M' AS `genderM`,
                        'F' AS `genderF`,
                        census_teachers.source AS source,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        education_grades.id AS education_grade_id,
                        education_programmes.id AS education_programme_id,
                        education_field_of_studies.id AS education_field_of_study_id,
                        education_programme_orientations.id AS education_programme_orientation_id,
                        education_cycles.id AS education_cycle_id,
                        education_levels.id AS education_level_id,
                        education_systems.id AS education_system_id,
                        education_level_isced.id AS education_level_isced_id,
                        education_certifications.id AS education_certification_id,
                        school_years.id AS school_year_id
                    FROM census_teachers
                    LEFT JOIN institution_sites ON census_teachers.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN census_teacher_grades ON census_teachers.id = census_teacher_grades.census_teacher_id
                        LEFT JOIN education_grades ON census_teacher_grades.education_grade_id = education_grades.id
                            LEFT JOIN education_programmes ON education_grades.education_programme_id = education_programmes.id
                                LEFT JOIN education_field_of_studies ON education_programmes.education_field_of_study_id = education_field_of_studies.id
                                    LEFT JOIN education_programme_orientations ON education_field_of_studies.education_programme_orientation_id = education_programme_orientations.id
                                LEFT JOIN education_cycles ON education_programmes.education_cycle_id = education_cycles.id
                                    LEFT JOIN education_levels ON education_cycles.education_level_id = education_levels.id
                                        LEFT JOIN education_systems ON education_levels.education_system_id = education_systems.id
                                        LEFT JOIN education_level_isced ON education_levels.education_level_isced_id = education_level_isced.id
                                LEFT JOIN education_certifications ON education_programmes.education_certification_id = education_certifications.id
                    LEFT JOIN school_years ON census_teachers.school_year_id = school_years.id;
                ]]>
            </SQL>
        </select>
    </process>
    <process name="census_textbooks" type="census">
        <drop type="destination" table="fact_census_textbooks">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_textbooks`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_textbooks">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_textbooks;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_textbooks">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_textbooks` (
--                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `education_grade_subject_id` int(11) DEFAULT NULL,
                      `education_grade_id` int(11) DEFAULT NULL,
                      `education_programme_id` int(11) DEFAULT NULL,
                      `education_field_of_study_id` int(11) DEFAULT NULL,
                      `education_programme_orientation_id` int(11) DEFAULT NULL,
                      `education_cycle_id` int(11) DEFAULT NULL,
                      `education_level_id` int(11) DEFAULT NULL,
                      `education_system_id` int(11) DEFAULT NULL,
                      `education_level_isced_id` int(11) DEFAULT NULL,
                      `education_certification_id` int(11) DEFAULT NULL,
                      `education_subject_id` int(11) DEFAULT NULL,
                      `institution_site_programme_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
--                      PRIMARY KEY (`id`),
                      KEY `school_year_id` (`school_year_id`),
                      KEY `source` (`source`),
                      KEY `education` (`education_grade_subject_id`,`education_grade_id`,`education_programme_id`,`education_field_of_study_id`,`education_programme_orientation_id`,`education_cycle_id`,`education_level_id`,`education_system_id`,`education_level_isced_id`,`education_certification_id`,`education_subject_id`),
                      KEY `institution_site` (`institution_site_programme_id`,`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_textbooks">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_textbooks` (
                        `value`, `source`, `education_grade_subject_id`, `education_grade_id`, `education_programme_id`,
                        `education_field_of_study_id`, `education_programme_orientation_id`, `education_cycle_id`,
                        `education_level_id`, `education_system_id`, `education_level_isced_id`, `education_certification_id`,
                        `education_subject_id`, `institution_site_programme_id`, `institution_site_id`,
                        `institution_site_locality_id`, `institution_site_type_id`, `institution_site_ownership_id`,
                        `institution_site_status_id`, `area_id`, `area_level_id`, `institution_id`, `institution_sector_id`,
                        `institution_provider_id`, `institution_status_id`, `school_year_id`
                    ) VALUES (
                        :value, :source, :education_grade_subject_id, :education_grade_id, :education_programme_id,
                        :education_field_of_study_id, :education_programme_orientation_id, :education_cycle_id,
                        :education_level_id, :education_system_id, :education_level_isced_id, :education_certification_id,
                        :education_subject_id, :institution_site_programme_id, :institution_site_id,
                        :institution_site_locality_id, :institution_site_type_id, :institution_site_ownership_id,
                        :institution_site_status_id, :area_id, :area_level_id, :institution_id, :institution_sector_id,
                        :institution_provider_id, :institution_status_id, :school_year_id
                    );
                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_textbooks">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_textbooks.value AS 'value',
                        census_textbooks.source AS source,
                        education_grades_subjects.id AS education_grade_subject_id,
                        education_grades.id AS education_grade_id,
                        education_programmes.id AS education_programme_id,
                        education_field_of_studies.id AS education_field_of_study_id,
                        education_programme_orientations.id AS education_programme_orientation_id,
                        education_cycles.id AS education_cycle_id,
                        education_levels.id AS education_level_id,
                        education_systems.id AS education_system_id,
                        education_level_isced.id AS education_level_isced_id,
                        education_certifications.id AS education_certification_id,
                        education_subjects.id AS education_subject_id,
                        institution_site_programmes.id AS institution_site_programme_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_textbooks
                    /* joining through institution */
					LEFT JOIN institution_sites ON census_textbooks.institution_site_id = institution_sites.id
					    LEFT JOIN areas ON institution_sites.area_id = areas.id
					        LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
					    LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
					        LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
					        LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
					        LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
--                         LEFT JOIN institution_site_classes ON institution_sites.id = institution_site_classes.institution_site_id
--                             LEFT JOIN institution_site_class_grades ON institution_site_classes.id = institution_site_class_grades.institution_site_class_id
                        LEFT JOIN institution_site_programmes ON institution_sites.id = institution_site_programmes.institution_site_id
                    /* joining through education_grade_subjects */
					LEFT JOIN education_grades_subjects ON census_textbooks.education_grade_subject_id = education_grades_subjects.id
						LEFT JOIN education_subjects ON education_grades_subjects.education_subject_id = education_subjects.id
							LEFT JOIN education_grades ON education_grades_subjects.education_grade_id = education_grades.id
								LEFT JOIN education_programmes ON education_grades.education_programme_id = education_programmes.id
									LEFT JOIN education_cycles ON education_programmes.education_cycle_id = education_cycles.id
										LEFT JOIN education_levels ON education_cycles.education_level_id = education_levels.id
											LEFT JOIN education_systems ON education_levels.education_system_id = education_systems.id
											LEFT JOIN education_level_isced ON education_levels.education_level_isced_id = education_level_isced.id
									LEFT JOIN education_field_of_studies ON education_programmes.education_field_of_study_id = education_field_of_studies.id
										LEFT JOIN education_programme_orientations ON education_field_of_studies.education_programme_orientation_id = education_programme_orientations.id
									LEFT JOIN education_certifications ON education_programmes.education_certification_id = education_certifications.id
                    LEFT JOIN school_years ON census_textbooks.school_year_id = school_years.id;
                ]]>
            </SQL>
        </select>
    </process>
    <process name="census_water" type="census">
        <drop type="destination" table="fact_census_water">
            <SQL dialect="mysql">
                <![CDATA[
                    DROP TABLE `fact_census_water`;
                ]]>
            </SQL>
        </drop>
        <truncate type="destination" table="fact_census_water">
            <SQL dialect="mysql">
                <![CDATA[
                    TRUNCATE TABLE fact_census_water;
                ]]>
            </SQL>
        </truncate>
        <create type="destination" table="fact_census_water">
            <SQL dialect="mysql">
                <![CDATA[
                    CREATE TABLE `fact_census_water` (
                      `id` int(11) NOT NULL AUTO_INCREMENT,
                      `value` int(11) DEFAULT NULL,
                      `source` int(1) DEFAULT '0' COMMENT '0-dataentry,1-external,2-estimate',
                      `infrastructure_water_id` int(11) DEFAULT NULL,
                      `infrastructure_status_id` int(11) DEFAULT NULL,
                      `institution_site_id` int(11) DEFAULT NULL,
                      `institution_site_locality_id` int(11) DEFAULT NULL,
                      `institution_site_type_id` int(11) DEFAULT NULL,
                      `institution_site_ownership_id` int(11) DEFAULT NULL,
                      `institution_site_status_id` int(11) DEFAULT NULL,
                      `area_id` int(11) DEFAULT NULL,
                      `area_level_id` int(11) DEFAULT NULL,
                      `institution_id` int(11) DEFAULT NULL,
                      `institution_sector_id` int(11) DEFAULT NULL,
                      `institution_provider_id` int(11) DEFAULT NULL,
                      `institution_status_id` int(11) DEFAULT NULL,
                      `school_year_id` int(11) DEFAULT NULL,
                      PRIMARY KEY (`id`),
                      KEY `school_year_id` (`school_year_id`),
                      KEY `source` (`source`),
                      KEY `infrastructure` (`infrastructure_water_id`,`infrastructure_status_id`),
                      KEY `institution_site` (`institution_site_id`,`institution_site_locality_id`,`institution_site_type_id`,`institution_site_ownership_id`,`institution_site_status_id`),
                      KEY `area` (`area_id`,`area_level_id`),
                      KEY `institution` (`institution_id`,`institution_sector_id`,`institution_provider_id`,`institution_status_id`)
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;
                ]]>
            </SQL>
        </create>
        <insert type="destination" table="fact_census_water">
            <SQL dialect="mysql">
                <![CDATA[
                    INSERT INTO `fact_census_water` (
                        `id`, `value`, `source`, `infrastructure_water_id`, `infrastructure_status_id`,
                        `institution_site_id`, `institution_site_locality_id`, `institution_site_type_id`,
                        `institution_site_ownership_id`, `institution_site_status_id`, `area_id`, `area_level_id`,
                        `institution_id`, `institution_sector_id`, `institution_provider_id`, `institution_status_id`,
                        `school_year_id`
                    ) VALUES (
                        :id, :value, :source, :infrastructure_water_id, :infrastructure_status_id,
                        :institution_site_id, :institution_site_locality_id, :institution_site_type_id,
                        :institution_site_ownership_id, :institution_site_status_id, :area_id, :area_level_id,
                        :institution_id, :institution_sector_id, :institution_provider_id, :institution_status_id,
                        :school_year_id
                    );

                ]]>
            </SQL>
        </insert>
        <select type="source" table="census_water">
            <SQL dialect="mysql">
                <![CDATA[
                    SELECT
                        census_water.id AS id,
                        census_water.value AS 'value',
                        census_water.source AS source,
                        infrastructure_water.id AS infrastructure_water_id,
                        infrastructure_statuses.id AS infrastructure_status_id,
                        institution_sites.id AS institution_site_id,
                        institution_site_localities.id AS institution_site_locality_id,
                        institution_site_types.id AS institution_site_type_id,
                        institution_site_ownership.id AS institution_site_ownership_id,
                        institution_site_statuses.id AS institution_site_status_id,
                        areas.id AS area_id,
                        area_levels.id AS area_level_id,
                        institutions.id AS institution_id,
                        institution_sectors.id AS institution_sector_id,
                        institution_providers.id AS institution_provider_id,
                        institution_statuses.id AS institution_status_id,
                        school_years.id AS school_year_id
                    FROM census_water
                    LEFT JOIN infrastructure_water ON census_water.infrastructure_water_id = infrastructure_water.id
                    LEFT JOIN infrastructure_statuses ON census_water.infrastructure_status_id = infrastructure_statuses.id
                    LEFT JOIN institution_sites ON census_water.institution_site_id = institution_sites.id
                        LEFT JOIN institution_site_localities ON institution_sites.institution_site_locality_id = institution_site_localities.id
                        LEFT JOIN institution_site_types ON institution_sites.institution_site_type_id = institution_site_types.id
                        LEFT JOIN institution_site_ownership ON institution_sites.institution_site_ownership_id = institution_site_ownership.id
                        LEFT JOIN institution_site_statuses ON institution_sites.institution_site_status_id = institution_site_statuses.id
                        LEFT JOIN areas ON area_id = areas.id
                            LEFT JOIN area_levels ON areas.area_level_id = area_levels.id
                        LEFT JOIN institutions ON institution_sites.institution_id = institutions.id
                            LEFT JOIN institution_sectors ON institutions.institution_sector_id = institution_sectors.id
                            LEFT JOIN institution_providers ON institutions.institution_provider_id = institution_providers.id
                            LEFT JOIN institution_statuses ON institutions.institution_status_id = institution_statuses.id
                    LEFT JOIN school_years ON census_water.school_year_id = school_years.id;
                ]]>
            </SQL>
        </select>
    </process>

</processes>
