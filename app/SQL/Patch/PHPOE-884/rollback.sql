Update batch_reports set query='$this->autoRender = false;\n        $TrainingCourse = ClassRegistry::init(''TrainingCourse'');\n        $TrainingCourse->formatResult = true;\n        $data = $TrainingCourse->find(''all'', \n        array(''fields'' => array(\n            ''TrainingCourse.code AS CourseCode'',''TrainingCourse.title AS CourseTitle'',\n            ''GROUP_CONCAT(TrainingProvider.name) as Provider'',''TrainingCourse.credit_hours AS Credit'', \n            ''TrainingSession.location as Location'', ''TrainingSession.start_date as StartDate'',\n            ''TrainingSession.end_date as EndDate'', ''Staff.identification_no as OpenEmisID'',\n            ''Staff.first_name as FirstName'', ''Staff.last_name as LastName'', \n            ''TrainingSessionTrainee.result as Result'',''((CASE WHEN TrainingSessionTrainee.pass=-1 THEN "-" WHEN TrainingSessionTrainee.pass=1 THEN "Passed"\n             ELSE "Failed" END)) AS Completed''\n            \n        ),\n        ''joins'' => array(\n            array(''table'' => ''training_sessions'',''alias'' => ''TrainingSession'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingCourse.id = TrainingSession.training_course_id'')\n            ),\n            array(''table'' => ''training_course_providers'',''alias'' => ''TrainingCourseProvider'',''type'' => ''LEFT'',\n                ''conditions'' => array(''TrainingCourse.id = TrainingCourseProvider.training_course_id'')\n            ),\n            array(''table'' => ''training_providers'',''alias'' => ''TrainingProvider'',''type'' => ''LEFT'',\n                ''conditions'' => array(''TrainingProvider.id = TrainingCourseProvider.training_provider_id'')\n            ), \n            array(''table'' => ''training_session_trainees'',''alias'' => ''TrainingSessionTrainee'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingSession.id = TrainingSessionTrainee.training_session_id'')\n            ), \n            array(''table'' => ''staff'',''alias'' => ''Staff'',''type'' => ''INNER'',\n                ''conditions'' => array(''Staff.id = TrainingSessionTrainee.staff_id'')\n            )\n         ),\n         ''group'' => array(''TrainingCourse.id'',''TrainingSessionTrainee.staff_id''),\n         ''order'' =>array(''TrainingCourse.title'', ''Staff.first_name'')\n        ));',
template='CourseCode,CourseTitle,Provider,Credit,Location,StartDate,EndDate,OpenEmisID,FirstName,LastName,Result,Completed'
where id = 1030;

Update batch_reports set query='$this->autoRender = false;\n        $StaffTrainingNeed = ClassRegistry::init(''StaffTrainingNeed'');\n        $StaffTrainingNeed->bindModel(\n            array(''belongsTo''=>\n                array(\n                    ''TrainingCourse'' => array(\n                        ''className'' => ''TrainingCourse'',\n                        ''foreignKey'' => ''ref_course_id'',\n                        ''conditions'' => array(''ref_course_table'' => ''TrainingCourse''),\n                    ),\n                    ''TrainingNeedCategory'' => array(\n                        ''className'' => ''FieldOptionValue'',\n                        ''foreignKey'' => ''ref_course_id'',\n                        ''conditions'' => array(''ref_course_table'' => ''TrainingNeedCategory''),\n                    )\n                )\n            )\n        );\n        $StaffTrainingNeed->formatResult = true;\n        $data = $StaffTrainingNeed->find(''all'', \n        array(''fields'' => array(\n            ''((CASE WHEN StaffTrainingNeed.ref_course_table ="TrainingNeedCategory" THEN TrainingNeedCategory.name\n             ELSE "Course Catalogue" END)) AS NeedType'',\n            ''StaffTrainingNeed.ref_course_code AS CourseCode'',''StaffTrainingNeed.ref_course_title AS CourseTitle'',\n            ''StaffTrainingNeed.ref_course_requirement AS Requirement'', ''TrainingPriority.name AS Priority'', ''StaffTrainingNeed.comments AS Comment'', \n            ''Staff.identification_no AS OpenEmisID'', ''Staff.first_name AS FirstName'', \n            ''Staff.last_name AS LastName''\n        ),\n        ''joins'' => array(\n            array(''table'' => ''staff'',''alias'' => ''Staff'',''type'' => ''INNER'',\n                ''conditions'' => array(''Staff.id = StaffTrainingNeed.staff_id'')\n            ),\n            array(''table'' => ''training_statuses'',''alias'' => ''TrainingStatus'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingStatus.id = StaffTrainingNeed.training_status_id'')\n            ),\n            array(''table'' => ''training_priorities'',''alias'' => ''TrainingPriority'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingPriority.id = StaffTrainingNeed.training_priority_id'')\n            )\n         ),\n         ''conditions'' => array(''StaffTrainingNeed.training_status_id''=>3),\n         ''order'' => array(''StaffTrainingNeed.ref_course_title'')\n        ));', 
template='NeedType,CourseCode,CourseTitle,Requirement,Priority,Comment,OpenEmisID,FirstName,LastName'
where id = 1031;

Update batch_reports set query='$this->autoRender = false;\n        $TrainingCourse = ClassRegistry::init(''TrainingCourse'');\n        $TrainingCourse->formatResult = true;\n        $data = $TrainingCourse->find(''all'', \n        array(''fields'' => array(\n            ''TrainingCourse.code AS CourseCode'',''TrainingCourse.title AS CourseTitle'',\n            ''TrainingCourse.credit_hours AS Credit'', ''TrainingSession.location AS Location'',\n            ''Staff.identification_no as OpenEmisID'',\n            ''Staff.first_name as FirstName'', ''Staff.last_name as LastName'', \n            ''TrainingSession.start_date AS StartDate'', ''TrainingSession.end_date AS EndDate'', \n        ),\n        ''joins'' => array(\n            array(''table'' => ''training_sessions'',''alias'' => ''TrainingSession'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingCourse.id = TrainingSession.training_course_id'')\n            ), \n            array(''table'' => ''training_session_trainees'',''alias'' => ''TrainingSessionTrainee'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingSession.id = TrainingSessionTrainee.training_session_id'', ''TrainingSession.training_status_id''=>3)\n            ),\n            array(''table'' => ''training_session_results'',''alias'' => ''TrainingSessionResult'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingSession.id = TrainingSessionResult.training_session_id'', ''NOT'' => array(''TrainingSessionResult.training_status_id''=>3))\n            ), \n            array(''table'' => ''staff'',''alias'' => ''Staff'',''type'' => ''INNER'',\n                ''conditions'' => array(''Staff.id = TrainingSessionTrainee.staff_id'')\n            )\n         ),\n         ''order'' => array(''TrainingCourse.title'')\n        ));', 
template='CourseCode,CourseTitle,Credit,Location,OpenEmisID,FirstName,LastName,StartDate,EndDate'
where id = 1032;

Update batch_reports set query='$this->autoRender = false;\n        $TrainingCourse = ClassRegistry::init(''TrainingSessionTrainee'');\n        $TrainingCourse->formatResult = true;\n        $data = $TrainingCourse->find(''all'', \n        array(''fields'' => array(\n            ''Staff.identification_no as OpenEmisID'', ''Staff.first_name as FirstName'', \n            ''Staff.last_name as LastName'', ''StaffPositionTitle.name as Position'',\n            ''TrainingCourse1.code AS CourseCode'',''TrainingCourse1.title AS CourseTitle'',\n            ''TrainingSession1.location as Location'', ''TrainingSession1.start_date as StartDate'', \n            ''TrainingSession1.end_date as EndDate''\n        ),\n        ''joins'' => array(\n            array(\n                ''table'' => ''training_sessions'',''alias'' => ''TrainingSession1'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingSession1.id = TrainingSessionTrainee.training_session_id'', ''TrainingSession1.training_status_id''=>3)\n            ),\n            array(\n                ''table'' => ''training_sessions'',''alias'' => ''TrainingSession2'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingSession2.id = TrainingSessionTrainee.training_session_id'', ''TrainingSession2.training_status_id''=>3)\n            ),\n             array(\n                ''table'' => ''training_courses'',''alias'' => ''TrainingCourse1'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingCourse1.id = TrainingSession1.training_course_id'', ''TrainingCourse1.training_status_id''=>3)\n            ), \n             array(\n                ''table'' => ''training_courses'',''alias'' => ''TrainingCourse2'',''type'' => ''INNER'',\n                ''conditions'' => array(''TrainingCourse2.id = TrainingSession2.training_course_id'', ''TrainingCourse2.training_status_id''=>3)\n            ), \n            array(''table'' => ''staff'',''alias'' => ''Staff'',''type'' => ''LEFT'',\n                ''conditions'' => array(''Staff.id = TrainingSessionTrainee.staff_id'')\n            ), \n            array(''table'' => ''institution_site_staff'',''alias'' => ''InstitutionSiteStaff'',''type'' => ''LEFT'',\n                ''conditions'' => array(''Staff.id = InstitutionSiteStaff.staff_id'')\n            ), \n            array(''table'' => ''institution_site_positions'',''alias'' => ''InstitutionSitePosition'',''type'' => ''LEFT'',\n                ''conditions'' => array(''InstitutionSiteStaff.institution_site_position_id = InstitutionSitePosition.id'')\n            ), \n            array(''table'' => ''staff_position_titles'',''alias'' => ''StaffPositionTitle'',''type'' => ''LEFT'',\n                ''conditions'' => array(''StaffPositionTitle.id = InstitutionSitePosition.staff_position_title_id'')\n            ), \n         ),\n         ''conditions'' => \n         array(''TrainingSession1.start_date <= TrainingSession2.start_date'', \n            ''TrainingSession1.end_date >= TrainingSession2.start_date''\n         ),\n         ''group'' => array(''TrainingSessionTrainee.staff_id HAVING COUNT(TrainingSessionTrainee.staff_id) > 1''),\n         ''order'' => array(''TrainingCourse1.title'')\n        ));', 
template='OpenEmisID,FirstName,LastName,Position,CourseCode,CourseTitle,Location,StartDate,EndDate'
where id = 1034;

