DELETE FROM `batch_reports` WHERE `batch_reports`.`id` = 3000 LIMIT 1;
DELETE FROM `batch_reports` WHERE `batch_reports`.`id` = 3001 LIMIT 1;
DELETE FROM `batch_reports` WHERE `batch_reports`.`id` = 3002 LIMIT 1;

INSERT INTO `batch_reports` (`id`, `name`, `query`, `template`, `order`, `report_id`, `modified_user_id`, `modified`, `created_user_id`, `created`) VALUES
(3000, 'QA School Report', 'App::import(''Model'', ''InstitutionSite'');\n        App::import(''Model'', ''Quality.QualityBatchReport'');\n\n        $qbr = new QualityBatchReport();\n        $InstitutionSite = new InstitutionSite();\n\n        $fields = $qbr->getLocalSchoolDisplayFieldTable();\n        $joins = $qbr->getLocalSchoolJoinTableData();\n\n\n        $dbo = $InstitutionSite->getDataSource();\n        $queryFinal = $dbo->buildStatement(array(\n            ''fields'' => $fields,\n            ''table'' => $dbo->fullTableName($InstitutionSite),\n            ''alias'' => $InstitutionSite->alias,\n            {cond},\n            ''joins'' => $joins,\n            ''conditions'' => null,\n            ''group'' => array(''SchoolYear.name'', ''InstitutionSite.id'', ''InstitutionSiteClass.id'',/* ''EducationGrade.id'',*/''RubricTemplate.id'', ''RubricTemplateHeader.id''),\n            ''order'' => array(''SchoolYear.name DESC'', ''InstitutionSite.name'', ''EducationGrade.name'', ''InstitutionSiteClass.name'', ''RubricTemplate.id'', ''RubricTemplateHeader.order'')\n\n            \n                ), $InstitutionSite);\n\n\n        $queryCount = $dbo->buildStatement(array(\n            ''fields'' => array(''COUNT(*) as TotalCount''),\n            ''table'' => ''('' . $queryFinal . '')'',\n            ''alias'' => $InstitutionSite->alias . ''Fliter'',\n            ''limit'' => null,\n            ''offset'' => null,\n            ''joins'' => array(),\n            ''conditions'' => null,\n            ''group'' => null,\n            ''order'' => null\n                ), $InstitutionSite);\n\n        $data = $dbo->fetchAll($queryFinal);\n        pr($data);\n        $data = $qbr->generateQASchoolsReport($data);\n \n        $settings[''custom3LayerFormat''] = true;', NULL, 1, 3000, NULL, NULL, 1, '2014-02-24 00:00:00'),
(3001, 'QA Results Report', 'App::import(''Model'', ''InstitutionSite'');\r\n        App::import(''Model'', ''Quality.QualityBatchReport'');\r\n        $qbr = new QualityBatchReport();\r\n        $InstitutionSite = new InstitutionSite();\r\n\r\n        $fields = $qbr->getResultDisplayFieldTable(''base'');\r\n        $joins = $qbr->getResultJoinTableData();\r\n\r\n        $dbo = $InstitutionSite->getDataSource();\r\n        $query = $dbo->buildStatement(array(\r\n            ''fields'' => $fields,\r\n            ''table'' => $dbo->fullTableName($InstitutionSite),\r\n            ''alias'' => $InstitutionSite->alias,\r\n            ''limit'' => null,\r\n            ''offset'' => null,\r\n            ''joins'' => $joins,\r\n            ''conditions'' => null,\r\n            ''group'' => array(''InstitutionSiteClass.id'', ''RubricTemplate.id''),\r\n            ''order'' => array(/*''Institution.name'',*/ ''InstitutionSite.name'', ''SchoolYear.name DESC'', ''EducationGrade.name'', ''InstitutionSiteClass.name'', ''RubricTemplate.id'')\r\n                ), $InstitutionSite);\r\n\r\n        $query = ''('' . $query . '')'';\r\n\r\n        $fields2 = $qbr->getResultDisplayFieldTable(''search'');\r\n\r\n        $queryFinal = $dbo->buildStatement(array(\r\n            ''fields'' => $fields2,\r\n            ''table'' => $query,\r\n            ''alias'' => $InstitutionSite->alias . ''Fliter'',\r\n            {cond},\r\n            ''joins'' => array(),\r\n            ''conditions'' => null,\r\n            ''group'' => array(''Year'', ''RubricId'', ''InstitutionSiteId'', ''GradeId''),\r\n            ''order'' => array(''InstitutionName'', ''Year DESC'', ''Grade'', ''Class'')\r\n                ), $InstitutionSite);\r\n\r\n\r\n        $queryCount = $dbo->buildStatement(array(\r\n            ''fields'' => array(''COUNT(*) as TotalCount''),\r\n            ''table'' => ''('' . $queryFinal . '')'',\r\n            ''alias'' => $InstitutionSite->alias . ''Fliter'',\r\n            ''limit'' => null,\r\n            ''offset'' => null,\r\n            ''joins'' => array(),\r\n            ''conditions'' => null,\r\n            ''group'' => null,\r\n            ''order'' => null\r\n                ), $InstitutionSite);\r\n\r\n        $data = $dbo->fetchAll($queryFinal);\r\n \r\n        $data = $qbr->generateQAResultReport($data);', 'Year,InstitutionName,InstitutionCode,Grade,RubricName,TotalClasses,Maximum,Minimum,Average,Pass/Fail', 2, 3001, NULL, NULL, 1, '2014-02-24 00:00:00'),
(3002, 'QA Rubric Not Completed Report', 'App::import(''Model'', ''InstitutionSite'');\r\n        App::import(''Model'', ''Quality.QualityBatchReport'');\r\n \r\n$settings[''custom3LayerFormat''] = true;\r\n\r\n        $qbr = new QualityBatchReport();\r\n        $InstitutionSite = new InstitutionSite();\r\n\r\n        $fields = $qbr->getNotCompleteDisplayFieldTable(''base'');\r\n        $joins = $qbr->getNotCompleteJoinTableData();\r\n\r\n        $dbo = $InstitutionSite->getDataSource();\r\n        $query = $dbo->buildStatement(array(\r\n            ''fields'' => $fields,\r\n            ''table'' => $dbo->fullTableName($InstitutionSite),\r\n            ''alias'' => $InstitutionSite->alias,\r\n            ''limit'' => null,\r\n            ''offset'' => null,\r\n            ''joins'' => $joins,\r\n            ''conditions'' => null,\r\n            ''group'' => array(''InstitutionSiteClass.id'', ''RubricTemplate.id'',  ''RubricTemplateSubheader.id''),\r\n            ''order'' => array(''SchoolYear.name DESC'', ''InstitutionSite.name'', ''EducationGrade.name'', ''InstitutionSiteClass.name'', ''RubricTemplate.id'', ''RubricTemplateHeader.order'')\r\n                ), $InstitutionSite);\r\n\r\n        $query = ''('' . $query . '')'';\r\n\r\n        $fields2 = $qbr->getNotCompleteDisplayFieldTable(''search'');\r\n\r\n        $queryFinal = $dbo->buildStatement(array(\r\n            ''fields'' => $fields2,\r\n            ''table'' => $query,\r\n            ''alias'' => $InstitutionSite->alias . ''Fliter'',\r\n            {cond},\r\n            ''joins'' => array(),\r\n            ''conditions'' => null,\r\n            ''group'' => array(''ClassId'', ''RubricId HAVING TotalQuestions != TotalAnswered''),\r\n            ''order'' => null\r\n                ), $InstitutionSite);\r\n\r\n\r\n        $queryCount = $dbo->buildStatement(array(\r\n            ''fields'' => array(''COUNT(*) as TotalCount''),\r\n            ''table'' => ''('' . $queryFinal . '')'',\r\n            ''alias'' => $InstitutionSite->alias . ''Fliter'',\r\n            ''limit'' => null,\r\n            ''offset'' => null,\r\n            ''joins'' => array(),\r\n            ''conditions'' => null,\r\n            ''group'' => null,\r\n            ''order'' => null\r\n                ), $InstitutionSite);\r\n\r\n        $data = $dbo->fetchAll($queryFinal);\r\n\r\n', 'Year,InstitutionName,InstitutionCode,Grade,Class,StaffName,RubricName,TotalQuestions,TotalAnswered', 2, 3002, NULL, NULL, 1, '2014-02-24 00:00:00');
